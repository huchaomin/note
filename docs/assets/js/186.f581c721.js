(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{693:function(t,a,e){"use strict";e.r(a);var s=e(7),l=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("可以在组件中调用的方法")]),t._v(" "),e("h2",{attrs:{id:"setstate-updater-callback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setstate-updater-callback"}},[t._v("#")]),t._v(" setState(updater[, callback])")]),t._v(" "),e("ol",[e("li",[t._v("对组件 state 的更改排入队列,并通知 React 需要使用更新后的 state 重新渲染此组件及其子组件")]),t._v(" "),e("li",[t._v("为了更好的感知性能，React 会延迟调用它，然后通过一次传递更新多个组件。React 并不会保证 state 的变更会立即生效。")]),t._v(" "),e("li",[t._v("setState() 并不总是立即更新组件。它会批量推迟更新。这使得在调用 setState() 后立即读取 this.state 成为了隐患。")]),t._v(" "),e("li",[t._v("使用 componentDidUpdate 或者 setState 的回调函数（setState(updater, callback)），这两种方式都可以保证在应用更新后触发。")]),t._v(" "),e("li",[t._v("第二个参数为可选的回调函数，它将在 setState 完成合并并重新渲染组件后执行。通常，我们建议使用 componentDidUpdate() 来代替此方式。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.setState((state, props) => {\n  return {counter: state.counter + props.step};     //浅合并到state中\n});\n")])])]),e("h2",{attrs:{id:"forceupdate-callback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#forceupdate-callback"}},[t._v("#")]),t._v(" forceUpdate(callback)")]),t._v(" "),e("ol",[e("li",[t._v("调用 forceUpdate() 将致使组件调用 render() 方法")]),t._v(" "),e("li",[t._v("此操作会跳过该组件的 shouldComponentUpdate()")]),t._v(" "),e("li",[t._v("但其子组件会触发正常的生命周期方法，包括 shouldComponentUpdate() 方法")]),t._v(" "),e("li",[t._v("应该避免使用 forceUpdate()，尽量在 render() 中使用 this.props 和 this.state。")])]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("Class 属性")]),t._v(" "),e("h2",{attrs:{id:"defaultprops"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defaultprops"}},[t._v("#")]),t._v(" defaultProps")]),t._v(" "),e("p",[t._v("为 Class 组件添加默认 props。这一般用于 props 未赋值，但又不能为 null 的情况。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("class CustomButton extends React.Component {\n  // ...\n}\n\nCustomButton.defaultProps = {\n  color: 'blue'\n};\n")])])]),e("p",[t._v("如果设置为static defaultProps,需要ES7转码格式")]),t._v(" "),e("h2",{attrs:{id:"displayname"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#displayname"}},[t._v("#")]),t._v(" displayName")]),t._v(" "),e("p",[t._v("displayName 字符串多用于调试消息")])])}),[],!1,null,null,null);a.default=l.exports}}]);