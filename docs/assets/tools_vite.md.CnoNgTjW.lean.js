import{_ as D}from"./chunks/FenceWrapper.Bs4gGVCd.js";import{N,_ as M,a as A,c as C,b as w,h as O,d as V,j,i as d,e as B,f as $,g as x,k as S}from"./chunks/theme.Cx5N_GoI.js";import{a4 as G,Z as T,$ as s,a0 as n,G as k,K as u,a5 as f,Y as H,h as t,a3 as l}from"./chunks/framework.BAU0wbai.js";const W=JSON.parse('{"title":"使用vite构建自己的前端应用","description":null,"frontmatter":{"author":"peter peter@qingcongai.com","date":"2024-11-25T14:25:34.000Z","lastEditors":"peter peter@qingcongai.com","lastEditTime":"2024-12-10T10:55:12.000Z","description":null,"order":2},"headers":[],"relativePath":"tools/vite.md","filePath":"tools/vite.md","lastUpdated":1733800366000}'),J={name:"tools/vite.md"};function P(a,i,R,Z,q,z){const e=B,v=N,p=M,m=A,r=C,o=w,g=D,_=O,E=V,y=$,h=x,b=S,F=j;return H(),T("div",null,[s(v,{id:"使用vite构建自己的前端应用"},{default:n(()=>[s(e,null,{default:n(()=>i[0]||(i[0]=[t("使用vite构建自己的前端应用")])),_:1})]),_:1}),s(p,{style:k([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:f(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(m,{id:"功能"},{default:n(()=>[s(e,null,{default:n(()=>i[1]||(i[1]=[t("功能")])),_:1})]),_:1}),s(r,{id:"json"},{default:n(()=>[s(e,null,{default:n(()=>i[2]||(i[2]=[t("JSON")])),_:1})]),_:1}),s(o,null,{default:n(()=>i[3]||(i[3]=[t("JSON 可以被直接导入 —— 同样支持具名导入")])),_:1}),s(g,{inCodeGroup:!1,content:`// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！
import { field } from './example2.json'
// 导入整个对象
import json from './example.json'`},{default:n(()=>i[4]||(i[4]=[l("div",{class:"language-ts line-numbers-mode"},[l("span",{class:"lang"},"ts"),l("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！")]),t(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"import"),l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}}," { field } "),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"from"),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," './example2.json'")]),t(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 导入整个对象")]),t(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"import"),l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}}," json "),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"from"),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," './example.json'")])])]),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br"),l("span",{class:"line-number"},"2"),l("br"),l("span",{class:"line-number"},"3"),l("br"),l("span",{class:"line-number"},"4"),l("br")])],-1)])),_:1}),s(r,{id:"动态导入"},{default:n(()=>[s(e,null,{default:n(()=>i[5]||(i[5]=[t("动态导入")])),_:1})]),_:1}),s(g,{inCodeGroup:!1,content:"// 变量仅代表一层深的文件名。如果 file 是 foo/bar，导入将会失败\nconst module = await import(`./dir/${file}.js`)"},{default:n(()=>i[6]||(i[6]=[l("div",{class:"language-ts line-numbers-mode"},[l("span",{class:"lang"},"ts"),l("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 变量仅代表一层深的文件名。如果 file 是 foo/bar，导入将会失败")]),t(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"const"),l("span",{style:{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"}}," module"),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," ="),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," await"),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," import"),l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"("),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"`./dir/${"),l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"file"),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"}.js`"),l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},")")])])]),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br"),l("span",{class:"line-number"},"2"),l("br")])],-1)])),_:1}),s(p,{style:k([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:f(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(m,{id:"环境变量和模式"},{default:n(()=>[s(e,null,{default:n(()=>i[7]||(i[7]=[t("环境变量和模式")])),_:1})]),_:1}),s(r,{id:"production"},{default:n(()=>[s(e,null,{default:n(()=>i[8]||(i[8]=[t("'production'")])),_:1})]),_:1}),s(o,null,{default:n(()=>[i[15]||(i[15]=t("应用运行的模式，可以通过 ")),s(e,{code:""},{default:n(()=>i[9]||(i[9]=[l("code",null,"--mode <xxx>",-1)])),_:1}),i[16]||(i[16]=t(" 指定，然后加载对应的 ")),s(e,{code:""},{default:n(()=>i[10]||(i[10]=[l("code",null,".env.xxx",-1)])),_:1}),i[17]||(i[17]=t(" 文件 默认情况下, ")),s(e,{code:""},{default:n(()=>i[11]||(i[11]=[l("code",null,"dev",-1)])),_:1}),i[18]||(i[18]=t(" 命令 运行在 ")),s(e,{code:""},{default:n(()=>i[12]||(i[12]=[l("code",null,"development",-1)])),_:1}),i[19]||(i[19]=t(" 模式，而 ")),s(e,{code:""},{default:n(()=>i[13]||(i[13]=[l("code",null,"build",-1)])),_:1}),i[20]||(i[20]=t(" 命令则运行在 ")),s(e,{code:""},{default:n(()=>i[14]||(i[14]=[l("code",null,"production",-1)])),_:1}),i[21]||(i[21]=t(" 模式"))]),_:1}),s(r,{id:"node-env"},{default:n(()=>[s(e,null,{default:n(()=>i[22]||(i[22]=[t("NODE_ENV")])),_:1})]),_:1}),s(o,null,{default:n(()=>[i[26]||(i[26]=t("与 ")),s(e,{code:""},{default:n(()=>i[23]||(i[23]=[l("code",null,"MODE",-1)])),_:1}),i[27]||(i[27]=t(" 的没有丝毫关系，是两个不同的概念 会影响 ")),s(e,{code:""},{default:n(()=>i[24]||(i[24]=[l("code",null,"PROD",-1)])),_:1}),i[28]||(i[28]=t(" 和 ")),s(e,{code:""},{default:n(()=>i[25]||(i[25]=[l("code",null,"DEV",-1)])),_:1}),i[29]||(i[29]=t(" 的行为"))]),_:1}),s(_,{striped:"","single-line":!1},{default:n(()=>i[30]||(i[30]=[l("thead",null,[l("tr",null,[l("th",null,"Command"),l("th",null,"true"),l("th",null,"false")])],-1),l("tbody",null,[l("tr",null,[l("td",null,"NODE_ENV=production"),l("td",null,"true"),l("td",null,"false")]),l("tr",null,[l("td",null,"NODE_ENV=development"),l("td",null,"false"),l("td",null,"true")]),l("tr",null,[l("td",null,"NODE_ENV=other"),l("td",null,"false"),l("td",null,"false")])],-1)])),_:1}),s(o,null,{default:n(()=>i[31]||(i[31]=[t("可以在命令行中设置，也可以在env文件中设置")])),_:1}),s(g,{inCodeGroup:!1,content:"NODE_ENV=development vite build"},{default:n(()=>i[32]||(i[32]=[l("div",{class:"language-bash line-numbers-mode"},[l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"NODE_ENV"),l("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"="),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"development"),l("span",{style:{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"}}," vite"),l("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," build")])])]),l("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[l("span",{class:"line-number"},"1"),l("br")])],-1)])),_:1}),s(E,{bordered:!1,title:"提示",type:"success"},{default:n(()=>[s(o,null,{default:n(()=>[i[35]||(i[35]=t("命令中使用 ")),s(e,{code:""},{default:n(()=>i[33]||(i[33]=[l("code",null,"NODE_ENV=...",-1)])),_:1}),i[36]||(i[36]=t(" 的主要好处是，它允许 Vite 提前检测到该值, 该值的重要性最高，不需要等待读取 ")),s(e,{code:""},{default:n(()=>i[34]||(i[34]=[l("code",null,"env",-1)])),_:1}),i[37]||(i[37]=t(" 文件之后才拿到该值"))]),_:1})]),_:1}),s(p,{style:k([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:f(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(m,{id:"ssr"},{default:n(()=>[s(e,null,{default:n(()=>i[38]||(i[38]=[t("ssr")])),_:1})]),_:1}),s(r,{id:"import-meta-url"},{default:n(()=>[s(e,null,{default:n(()=>i[39]||(i[39]=[t("import.meta.url")])),_:1})]),_:1}),s(E,{bordered:!1,title:"无法在 SSR 中使用",type:"warning"},{default:n(()=>[s(o,null,{default:n(()=>i[40]||(i[40]=[t("因为 import.meta.url 在浏览器和 Node.js 中有不同的语义。服务端的产物也无法预先确定客户端主机 URL。")])),_:1})]),_:1}),s(p,{style:k([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:f(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(m,{id:"参考资料"},{default:n(()=>[s(e,null,{default:n(()=>i[41]||(i[41]=[t("参考资料")])),_:1})]),_:1}),s(F,null,{default:n(()=>[s(b,null,{default:n(()=>[s(o,null,{default:n(()=>[s(h,{href:"https://github.com/antfu-collective/vitesse",target:"_blank",rel:"noreferrer"},{default:n(()=>[s(y,{type:"primary"},{default:n(()=>i[42]||(i[42]=[t("vitesse")])),_:1})]),_:1})]),_:1})]),_:1}),s(b,null,{default:n(()=>[s(o,null,{default:n(()=>i[43]||(i[43]=[t("unplugin-vue-router 和 vite-plugin-vue-layouts 可以不用自己写路由")])),_:1})]),_:1}),s(b,null,{default:n(()=>[s(o,null,{default:n(()=>i[44]||(i[44]=[t("vite-plugin-webfont-dl 自动处理字体")])),_:1})]),_:1})]),_:1})])}const Y=G(J,[["render",P]]);export{W as __pageData,Y as default};
