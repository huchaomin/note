import{_ as D}from"./chunks/FenceWrapper.BY3L6E93.js";import{N,f as M,g as A,i as C,h as w,o as O,j as V,q as j,k as d,l as B,r as $,m as x,n as S}from"./chunks/theme.Bvy8fpr0.js";import{aa as R,Z as T,$ as s,a0 as n,R as f,u,ab as k,Y as q,x as t,a3 as i}from"./chunks/framework.yfsRM9mo.js";const Y=JSON.parse('{"title":"使用vite构建自己的前端应用","description":null,"frontmatter":{"author":"peter peter@qingcongai.com","date":"2024-11-25T14:25:34.000Z","lastEditors":"peter peter@qingcongai.com","lastEditTime":"2024-12-11T10:27:31.000Z","description":null,"order":2},"headers":[],"relativePath":"tools/vite.md","filePath":"tools/vite.md"}'),G={name:"tools/vite.md"};function H(a,l,J,P,Z,z){const e=B,y=N,r=M,p=A,m=C,o=w,b=D,_=O,E=V,g=$,v=j,h=x,F=S;return q(),T("div",null,[s(y,{id:"使用vite构建自己的前端应用"},{default:n(()=>[s(e,null,{default:n(()=>l[0]||(l[0]=[t("使用vite构建自己的前端应用")])),_:1})]),_:1}),s(r,{style:f([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:k(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(p,{id:"功能"},{default:n(()=>[s(e,null,{default:n(()=>l[1]||(l[1]=[t("功能")])),_:1})]),_:1}),s(m,{id:"json"},{default:n(()=>[s(e,null,{default:n(()=>l[2]||(l[2]=[t("JSON")])),_:1})]),_:1}),s(o,null,{default:n(()=>l[3]||(l[3]=[t("JSON 可以被直接导入 —— 同样支持具名导入")])),_:1}),s(b,{inCodeGroup:!1,content:`// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！
import { field } from './example2.json'
// 导入整个对象
import json from './example.json'`},{default:n(()=>l[4]||(l[4]=[i("div",{class:"language-ts line-numbers-mode"},[i("span",{class:"lang"},"ts"),i("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"import"),i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}}," { field } "),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"from"),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," './example2.json'")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 导入整个对象")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"import"),i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}}," json "),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"from"),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," './example.json'")])])]),i("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[i("span",{class:"line-number"},"1"),i("br"),i("span",{class:"line-number"},"2"),i("br"),i("span",{class:"line-number"},"3"),i("br"),i("span",{class:"line-number"},"4"),i("br")])],-1)])),_:1}),s(m,{id:"动态导入"},{default:n(()=>[s(e,null,{default:n(()=>l[5]||(l[5]=[t("动态导入")])),_:1})]),_:1}),s(b,{inCodeGroup:!1,content:"// 变量仅代表一层深的文件名。如果 file 是 foo/bar，导入将会失败\nconst module = await import(`./dir/${file}.js`)"},{default:n(()=>l[6]||(l[6]=[i("div",{class:"language-ts line-numbers-mode"},[i("span",{class:"lang"},"ts"),i("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#6A737D","--shiki-light":"#6A737D"}},"// 变量仅代表一层深的文件名。如果 file 是 foo/bar，导入将会失败")]),t(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"const"),i("span",{style:{"--shiki-dark":"#79B8FF","--shiki-light":"#005CC5"}}," module"),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," ="),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," await"),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}}," import"),i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"("),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"`./dir/${"),i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"file"),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"}.js`"),i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},")")])])]),i("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[i("span",{class:"line-number"},"1"),i("br"),i("span",{class:"line-number"},"2"),i("br")])],-1)])),_:1}),s(r,{style:f([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:k(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(p,{id:"环境变量和模式"},{default:n(()=>[s(e,null,{default:n(()=>l[7]||(l[7]=[t("环境变量和模式")])),_:1})]),_:1}),s(m,{id:"production"},{default:n(()=>[s(e,null,{default:n(()=>l[8]||(l[8]=[t("'production'")])),_:1})]),_:1}),s(o,null,{default:n(()=>[l[15]||(l[15]=t("应用运行的模式，可以通过 ")),s(e,{code:""},{default:n(()=>l[9]||(l[9]=[i("code",null,"--mode <xxx>",-1)])),_:1}),l[16]||(l[16]=t(" 指定，然后加载对应的 ")),s(e,{code:""},{default:n(()=>l[10]||(l[10]=[i("code",null,".env.xxx",-1)])),_:1}),l[17]||(l[17]=t(" 文件 默认情况下, ")),s(e,{code:""},{default:n(()=>l[11]||(l[11]=[i("code",null,"dev",-1)])),_:1}),l[18]||(l[18]=t(" 命令 运行在 ")),s(e,{code:""},{default:n(()=>l[12]||(l[12]=[i("code",null,"development",-1)])),_:1}),l[19]||(l[19]=t(" 模式，而 ")),s(e,{code:""},{default:n(()=>l[13]||(l[13]=[i("code",null,"build",-1)])),_:1}),l[20]||(l[20]=t(" 命令则运行在 ")),s(e,{code:""},{default:n(()=>l[14]||(l[14]=[i("code",null,"production",-1)])),_:1}),l[21]||(l[21]=t(" 模式"))]),_:1}),s(m,{id:"node-env"},{default:n(()=>[s(e,null,{default:n(()=>l[22]||(l[22]=[t("NODE_ENV")])),_:1})]),_:1}),s(o,null,{default:n(()=>[l[26]||(l[26]=t("与 ")),s(e,{code:""},{default:n(()=>l[23]||(l[23]=[i("code",null,"MODE",-1)])),_:1}),l[27]||(l[27]=t(" 的没有丝毫关系，是两个不同的概念 会影响 ")),s(e,{code:""},{default:n(()=>l[24]||(l[24]=[i("code",null,"PROD",-1)])),_:1}),l[28]||(l[28]=t(" 和 ")),s(e,{code:""},{default:n(()=>l[25]||(l[25]=[i("code",null,"DEV",-1)])),_:1}),l[29]||(l[29]=t(" 的行为"))]),_:1}),s(_,{striped:"","single-line":!1},{default:n(()=>l[30]||(l[30]=[i("thead",null,[i("tr",null,[i("th",null,"Command"),i("th",null,"true"),i("th",null,"false")])],-1),i("tbody",null,[i("tr",null,[i("td",null,"NODE_ENV=production"),i("td",null,"true"),i("td",null,"false")]),i("tr",null,[i("td",null,"NODE_ENV=development"),i("td",null,"false"),i("td",null,"true")]),i("tr",null,[i("td",null,"NODE_ENV=other"),i("td",null,"false"),i("td",null,"false")])],-1)])),_:1}),s(o,null,{default:n(()=>l[31]||(l[31]=[t("可以在命令行中设置，也可以在env文件中设置")])),_:1}),s(b,{inCodeGroup:!1,content:"NODE_ENV=development vite build"},{default:n(()=>l[32]||(l[32]=[i("div",{class:"language-bash line-numbers-mode"},[i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-dark github-light vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#E1E4E8","--shiki-light":"#24292E"}},"NODE_ENV"),i("span",{style:{"--shiki-dark":"#F97583","--shiki-light":"#D73A49"}},"="),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}},"development"),i("span",{style:{"--shiki-dark":"#B392F0","--shiki-light":"#6F42C1"}}," vite"),i("span",{style:{"--shiki-dark":"#9ECBFF","--shiki-light":"#032F62"}}," build")])])]),i("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[i("span",{class:"line-number"},"1"),i("br")])],-1)])),_:1}),s(E,{bordered:!1,title:"提示",type:"success"},{default:n(()=>[s(o,null,{default:n(()=>[l[35]||(l[35]=t("命令中使用 ")),s(e,{code:""},{default:n(()=>l[33]||(l[33]=[i("code",null,"NODE_ENV=...",-1)])),_:1}),l[36]||(l[36]=t(" 的主要好处是，它允许 Vite 提前检测到该值, 该值的重要性最高，不需要等待读取 ")),s(e,{code:""},{default:n(()=>l[34]||(l[34]=[i("code",null,"env",-1)])),_:1}),l[37]||(l[37]=t(" 文件之后才拿到该值"))]),_:1})]),_:1}),s(r,{style:f([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:k(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(p,{id:"ssr"},{default:n(()=>[s(e,null,{default:n(()=>l[38]||(l[38]=[t("ssr")])),_:1})]),_:1}),s(m,{id:"import-meta-url"},{default:n(()=>[s(e,null,{default:n(()=>l[39]||(l[39]=[t("import.meta.url")])),_:1})]),_:1}),s(E,{bordered:!1,title:"无法在 SSR 中使用",type:"warning"},{default:n(()=>[s(o,null,{default:n(()=>l[40]||(l[40]=[t("因为 import.meta.url 在浏览器和 Node.js 中有不同的语义。服务端的产物也无法预先确定客户端主机 URL。")])),_:1})]),_:1}),s(r,{style:f([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:k(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(p,{id:"性能优化"},{default:n(()=>[s(e,null,{default:n(()=>l[41]||(l[41]=[t("性能优化")])),_:1})]),_:1}),s(v,null,{default:n(()=>[s(g,null,{default:n(()=>[s(o,null,{default:n(()=>l[42]||(l[42]=[t("开发环境 和 生产环境 引入ui库的方式区分 开发和生产使用不同的入口文件")])),_:1})]),_:1})]),_:1}),s(r,{style:f([{"margin-bottom":"0 !important"},{width:("isMobile"in a?a.isMobile:u(d))?"calc(100% + var(--spacing-6))":"calc(100% + var(--spacing-12))"}]),class:k(("isMobile"in a?a.isMobile:u(d))?"-mx-3":"-ml-8 -mr-3")},null,8,["class","style"]),s(p,{id:"参考资料"},{default:n(()=>[s(e,null,{default:n(()=>l[43]||(l[43]=[t("参考资料")])),_:1})]),_:1}),s(v,null,{default:n(()=>[s(g,null,{default:n(()=>[s(o,null,{default:n(()=>[s(F,{href:"https://github.com/antfu-collective/vitesse",target:"_blank",rel:"noreferrer"},{default:n(()=>[s(h,{type:"primary"},{default:n(()=>l[44]||(l[44]=[t("vitesse")])),_:1})]),_:1})]),_:1})]),_:1}),s(g,null,{default:n(()=>[s(o,null,{default:n(()=>l[45]||(l[45]=[t("unplugin-vue-router 和 vite-plugin-vue-layouts 可以不用自己写路由")])),_:1})]),_:1}),s(g,null,{default:n(()=>[s(o,null,{default:n(()=>l[46]||(l[46]=[t("vite-plugin-webfont-dl 自动处理字体")])),_:1})]),_:1})]),_:1})])}const I=R(G,[["render",H]]);export{Y as __pageData,I as default};
