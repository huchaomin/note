import{n as e,o as n,p as c,w as A,a as t,i as u}from"./vendor-a2411ed8.js";const r=u("h2",{id:"1-\u4F7F\u7528",class:"doc-heading"},"\u4F7F\u7528",-1),l=u("p",null,"async\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2A Promise \u5BF9\u8C61",-1),i=u("p",null,"async \u51FD\u6570\u6709\u591A\u79CD\u4F7F\u7528\u5F62\u5F0F\u3002",-1),D=u("p",null,"async\u51FD\u6570\u5185\u90E8return\u8BED\u53E5\u8FD4\u56DE\u7684\u503C\uFF0C\u4F1A\u6210\u4E3Athen\u65B9\u6CD5\u56DE\u8C03\u51FD\u6570\u7684\u53C2\u6570\u3002",-1),F=u("p",null,"async\u51FD\u6570\u5185\u90E8\u629B\u51FA\u9519\u8BEF\uFF0C\u4F1A\u5BFC\u81F4\u8FD4\u56DE\u7684 Promise \u5BF9\u8C61\u53D8\u4E3Areject\u72B6\u6001\u3002\u629B\u51FA\u7684\u9519\u8BEF\u5BF9\u8C61\u4F1A\u88ABcatch\u65B9\u6CD5\u56DE\u8C03\u51FD\u6570\u63A5\u6536\u5230\u3002",-1),E=u("h2",{id:"2-await-\u547D\u4EE4",class:"doc-heading"},"await \u547D\u4EE4",-1),B=u("p",null,"await\u547D\u4EE4\u540E\u9762\u662F\u4E00\u4E2A Promise \u5BF9\u8C61\uFF0C\u8FD4\u56DE\u8BE5\u5BF9\u8C61\u7684\u7ED3\u679C\u3002\u5982\u679C\u4E0D\u662F Promise \u5BF9\u8C61\uFF0C\u5C31\u76F4\u63A5\u8FD4\u56DE\u5BF9\u5E94\u7684\u503C\u3002",-1),d=u("p",null,"await\u547D\u4EE4\u540E\u9762\u662F\u4E00\u4E2Athenable\u5BF9\u8C61\uFF08\u5373\u5B9A\u4E49then\u65B9\u6CD5\u7684\u5BF9\u8C61\uFF09\uFF0C\u90A3\u4E48await\u4F1A\u5C06\u5176\u7B49\u540C\u4E8E Promise \u5BF9\u8C61\u3002",-1),h=u("p",null,"\u4EFB\u4F55\u4E00\u4E2Aawait\u8BED\u53E5\u540E\u9762\u7684Promise\u5BF9\u8C61\u53D8\u4E3Areject\u72B6\u6001\uFF0C\u90A3\u4E48\u6574\u4E2Aasync\u51FD\u6570\u90FD\u4F1A\u4E2D\u65AD\u6267\u884C\u3002",-1),C=u("h2",{id:"3-\u6CE8\u610F",class:"doc-heading"},"\u6CE8\u610F",-1),m=u("p",null,"\u591A\u4E2Aawait\u547D\u4EE4\u540E\u9762\u7684\u5F02\u6B65\u64CD\u4F5C\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u7EE7\u53D1\u5173\u7CFB\uFF0C\u6700\u597D\u8BA9\u5B83\u4EEC\u540C\u65F6\u89E6\u53D1\u3002",-1),p=u("p",null,"async \u51FD\u6570\u53EF\u4EE5\u4FDD\u7559\u8FD0\u884C\u5806\u6808",-1),w=u("p",null,"\u5E76\u53D1\u6267\u884C\u64CD\u4F5C\u653E\u5728\u5916\u9762",-1),y={__name:"async\u51FD\u6570",setup(_){const a=[{id:"doc-title",title:"async\u51FD\u6570"},{id:"1-\u4F7F\u7528",title:"1. \u4F7F\u7528"},{id:"2-await-\u547D\u4EE4",title:"2. await \u547D\u4EE4"},{id:"3-\u6CE8\u610F",title:"3. \u6CE8\u610F"}];return(f,g)=>{const o=e("doc-code"),s=e("doc-page");return n(),c(s,{desc:"",toc:a},{default:A(()=>[r,l,t(o,{code:"function%20timeout%28ms%29%20%7B%0A%20%20return%20new%20Promise%28%28resolve%29%20%3D%3E%20%7B%0A%20%20%20%20setTimeout%28resolve%2C%20ms%29%0A%20%20%7D%29%0A%7D%0Aasync%20function%20asyncPrint%28value%2C%20ms%29%20%7B%0A%20%20await%20timeout%28ms%29%0A%20%20console.log%28value%29%0A%7D%0AasyncPrint%28%27hello%20world%27%2C%2050%29%0A",lang:"javascript"}),i,t(o,{code:"//%20%u51FD%u6570%u58F0%u660E%0Aasync%20function%20foo%28%29%20%7B%7D%0A//%20%u51FD%u6570%u8868%u8FBE%u5F0F%0Aconst%20foo%20%3D%20async%20function%20%28%29%20%7B%7D%0A//%20%u5BF9%u8C61%u7684%u65B9%u6CD5%0Alet%20obj%20%3D%20%7B%20async%20foo%28%29%20%7B%7D%20%7D%0Aobj.foo%28%29.then%28...%29%0A//%20Class%20%u7684%u65B9%u6CD5%0Aclass%20Storage%20%7B%0A%20%20constructor%28%29%20%7B%0A%20%20%20%20this.cachePromise%20%3D%20caches.open%28%27avatars%27%29%0A%20%20%7D%0A%0A%20%20async%20getAvatar%28name%29%20%7B%0A%20%20%20%20const%20cache%20%3D%20await%20this.cachePromise%0A%20%20%20%20return%20cache.match%28%60/avatars/%24%7Bname%7D.jpg%60%29%0A%20%20%7D%0A%7D%0Aconst%20storage%20%3D%20new%20Storage%28%29%0Astorage.getAvatar%28%27jake%27%29.then%28%u2026%29%0A//%20%u7BAD%u5934%u51FD%u6570%0Aconst%20foo%20%3D%20async%20%28%29%20%3D%3E%20%7B%7D%0A",lang:"javascript"}),D,t(o,{code:"async%20function%20f%28%29%20%7B%0A%20%20return%20%27hello%20world%27%0A%7D%0Af%28%29.then%28v%20%3D%3E%20console.log%28v%29%29%0A//%20%22hello%20world%22%0A",lang:"javascript"}),F,t(o,{code:"async%20function%20f%28%29%20%7B%0A%20%20throw%20new%20Error%28%27%u51FA%u9519%u4E86%27%29%0A%7D%0Af%28%29.then%28%0A%20%20v%20%3D%3E%20console.log%28v%29%2C%0A%20%20e%20%3D%3E%20console.log%28e%29%0A%29%0A//%20Error%3A%20%u51FA%u9519%u4E86%0A",lang:"javascript"}),E,B,t(o,{code:"async%20function%20f%28%29%20%7B%0A%20%20//%20%u7B49%u540C%u4E8E%0A%20%20//%20return%20123%0A%20%20return%20await%20123%0A%7D%0Af%28%29.then%28v%20%3D%3E%20console.log%28v%29%29%0A//%20123%0A",lang:"javascript"}),d,t(o,{code:"class%20Sleep%20%7B%0A%20%20constructor%28timeout%29%20%7B%0A%20%20%20%20this.timeout%20%3D%20timeout%0A%20%20%7D%0A%20%20then%28resolve%2C%20reject%29%20%7B%0A%20%20%20%20const%20startTime%20%3D%20Date.now%28%29%0A%20%20%20%20setTimeout%28%0A%20%20%20%20%20%20%28%29%20%3D%3E%20resolve%28Date.now%28%29%20-%20startTime%29%2C%0A%20%20%20%20%20%20this.timeout%0A%20%20%20%20%29%0A%20%20%7D%0A%7D%0A%28async%20%28%29%20%3D%3E%20%7B%0A%20%20const%20sleepTime%20%3D%20await%20new%20Sleep%281000%29%0A%20%20console.log%28sleepTime%29%0A%7D%29%28%29%0A//%201000%0A",lang:"javascript"}),h,t(o,{code:"async%20function%20f%28%29%20%7B%0A%20%20await%20Promise.reject%28%27%u51FA%u9519%u4E86%27%29%0A%20%20await%20Promise.resolve%28%27hello%20world%27%29%20//%20%u4E0D%u4F1A%u6267%u884C%0A%7D%0A%0A//%u8981%u53D8%u4E3A%u53EF%u6267%u884C%0Aasync%20function%20f%28%29%20%7B%0A%20%20await%20Promise.reject%28%27%u51FA%u9519%u4E86%27%29.catch%28e%20%3D%3E%20console.log%28e%29%29%0A%20%20return%20await%20Promise.resolve%28%27hello%20world%27%29%0A%7D%0Af%28%29%0A.then%28v%20%3D%3E%20console.log%28v%29%29%0A//%20%u51FA%u9519%u4E86%0A//%20hello%20world%0A%0A//%u6216%u8005%0Aasync%20function%20main%28%29%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20val1%20%3D%20await%20firstStep%28%29%0A%20%20%20%20const%20val2%20%3D%20await%20secondStep%28val1%29%0A%20%20%20%20const%20val3%20%3D%20await%20thirdStep%28val1%2C%20val2%29%0A%20%20%20%20console.log%28%27Final%3A%20%27%2C%20val3%29%0A%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20console.error%28err%29%0A%20%20%7D%0A%7D%0A",lang:"javascript"}),C,m,t(o,{code:"let%20foo%20%3D%20await%20getFoo%28%29%0Alet%20bar%20%3D%20await%20getBar%28%29%20%20%20//%u53EA%u6709%u7B49foo%u72B6%u6001%u6539%u53D8%u4E4B%u540E%u624D%u80FD%u53BB%u83B7%u53D6bar%u7684%u72B6%u6001%0A%0A//%20%u6539%u5199%0Alet%20%5Bfoo%2C%20bar%5D%20%3D%20await%20Promise.all%28%5BgetFoo%28%29%2C%20getBar%28%29%5D%29%0A",lang:"javascript"}),p,t(o,{code:"const%20a%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20b%28%29.then%28%28%29%20%3D%3E%20c%28%29%29%0A%7D%0A//%20%u5F53b%28%29%u8FD0%u884C%u7684%u65F6%u5019%uFF0C%u51FD%u6570a%28%29%u4E0D%u4F1A%u4E2D%u65AD%uFF0C%u800C%u662F%u7EE7%u7EED%u6267%u884C%u3002%0A//%20%u7B49%u5230b%28%29%u8FD0%u884C%u7ED3%u675F%uFF0C%u53EF%u80FDa%28%29%u65E9%u5C31%u8FD0%u884C%u7ED3%u675F%u4E86%uFF0Cb%28%29%u6240%u5728%u7684%u4E0A%u4E0B%u6587%u73AF%u5883%u5DF2%u7ECF%u6D88%u5931%u4E86%u3002%0A//%20%u5982%u679Cb%28%29%u6216c%28%29%u62A5%u9519%uFF0C%u9519%u8BEF%u5806%u6808%u5C06%u4E0D%u5305%u62ECa%28%29%u3002%0A%0A//%u6539%u5199%0Aconst%20a%20%3D%20async%20%28%29%20%3D%3E%20%7B%0A%20%20await%20b%28%29%0A%20%20c%28%29%0A%7D%0A//%20b%28%29%u8FD0%u884C%u7684%u65F6%u5019%uFF0Ca%28%29%u662F%u6682%u505C%u6267%u884C%uFF0C%u4E0A%u4E0B%u6587%u73AF%u5883%u90FD%u4FDD%u5B58%u7740%u3002%0A//%20%u4E00%u65E6b%28%29%u6216c%28%29%u62A5%u9519%uFF0C%u9519%u8BEF%u5806%u6808%u5C06%u5305%u62ECa%28%29%u3002%0A",lang:"javascript"}),w,t(o,{code:"//%20%u7EE7%u53D1%u6267%u884C%0Aasync%20function%20logInOrder%28urls%29%20%7B%0A%20%20for%20%28const%20url%20of%20urls%29%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20fetch%28url%29%0A%20%20%20%20console.log%28await%20response.text%28%29%29%0A%20%20%7D%0A%7D%0A%0A//%20%u5E76%u53D1%u6267%u884C%uFF08async%u5728map%u51FD%u6570%u91CC%u9762%uFF09%0Aasync%20function%20logInOrder%28urls%29%20%7B%0A%20%20//%20%u53EF%u4EE5%u7406%u89E3%u6B64%u65F6map%u51FD%u6570%u6CA1%u6709%u6682%u505C%u6267%u884C%uFF0C%u56E0%u4E3A%u91CC%u9762%u7684async%20%u548C%20await%u662F%u4E00%u5BF9%0A%20%20const%20textPromises%20%3D%20urls.map%28async%20url%20%3D%3E%20%7B%0A%20%20%20%20const%20response%20%3D%20await%20fetch%28url%29%0A%20%20%20%20return%20response.text%28%29%0A%20%20%7D%29%0A%20%20for%20%28const%20textPromise%20of%20textPromises%29%20%7B%0A%20%20%20%20console.log%28await%20textPromise%29%0A%20%20%7D%0A%7D%0A",lang:"javascript"})]),_:1})}}};export{y as default};
