import{r as e,o as n,c as a,f as A,g as o,aa as u,v as s}from"./vendor-c85df83a.js";const c=u("p",null,[s("\u63D2\u4EF6\u53EA\u4F1A\u5E94\u7528\u4E8E\u5728 pinia \u4F20\u9012\u7ED9\u5E94\u7528\u7A0B\u5E8F\u540E\u521B\u5EFA\u7684\u3010app.use(pinia)\u3011 store\uFF0C\u5426\u5219\u5B83\u4EEC\u4E0D\u4F1A\u751F\u6548\u3002"),u("br"),s(" \u5728\u4E00\u4E2A\u63D2\u4EF6\u4E2D\uFF0C state \u53D8\u66F4\u6216\u6DFB\u52A0\uFF08\u5305\u62EC\u8C03\u7528 store.$patch()\uFF09\u90FD\u662F\u53D1\u751F\u5728 store \u88AB\u6FC0\u6D3B\u4E4B\u524D\uFF0C\u56E0\u6B64\u4E0D\u4F1A\u89E6\u53D1\u4EFB\u4F55\u8BA2\u9605\u51FD\u6570\u3002")],-1),E=u("h2",{id:"1-\u4F5C\u7528",class:"doc-heading"},"\u4F5C\u7528",-1),F=u("ul",null,[u("li",null,"\u4E3A store \u6DFB\u52A0\u65B0\u7684\u5C5E\u6027"),u("li",null,"\u5B9A\u4E49 store \u65F6\u589E\u52A0\u65B0\u7684\u9009\u9879"),u("li",null,"\u4E3A store \u589E\u52A0\u65B0\u7684\u65B9\u6CD5"),u("li",null,"\u5305\u88C5\u73B0\u6709\u7684\u65B9\u6CD5"),u("li",null,"\u6539\u53D8\u6216\u751A\u81F3\u53D6\u6D88 action"),u("li",null,"\u5B9E\u73B0\u526F\u4F5C\u7528\uFF0C\u5982\u672C\u5730\u5B58\u50A8"),u("li",null,"\u4EC5\u5E94\u7528\u63D2\u4EF6\u4E8E\u7279\u5B9A store")],-1),D=u("h2",{id:"2-\u7B80\u4ECB",class:"doc-heading"},"\u7B80\u4ECB",-1),d=u("h2",{id:"3-\u4F7F\u7528",class:"doc-heading"},"\u4F7F\u7528",-1),l=u("h3",{id:"4-\u5C06\u4E00\u4E2A\u9759\u6001\u5C5E\u6027\u6DFB\u52A0\u5230\u6240\u6709-store-\u5B9E\u4F8B",class:"doc-heading"},"\u5C06\u4E00\u4E2A\u9759\u6001\u5C5E\u6027\u6DFB\u52A0\u5230\u6240\u6709 store \u5B9E\u4F8B",-1),B=u("h3",{id:"5-\u4E3A\u6240\u6709-store-\u6DFB\u52A0\u65B0\u7684-state",class:"doc-heading"},"\u4E3A\u6240\u6709 store \u6DFB\u52A0\u65B0\u7684 state",-1),C=u("p",null,"\u5982\u679C\u4F60\u60F3\u7ED9 store \u6DFB\u52A0\u65B0\u7684 state \u5C5E\u6027\uFF0C\u6216\u8005\u5728 hydration \u8FC7\u7A0B\u4E2D\u4F7F\u7528\u7684\u5C5E\u6027\uFF0C\u4F60\u5FC5\u987B\u540C\u65F6\u5728\u4E24\u4E2A\u5730\u65B9\u6DFB\u52A0\u5B83",-1),p=u("ul",null,[u("li",null,"\u5728 store \u4E0A\uFF0C\u56E0\u6B64\u4F60\u53EF\u4EE5\u7528 store.myState \u8BBF\u95EE\u5B83\u3002"),u("li",null,"\u5728 store.$state \u4E0A\uFF0C\u56E0\u6B64\u5B83\u53EF\u4EE5\u5728 devtools \u4E2D\u4F7F\u7528\uFF0C\u5E76\u4E14\uFF0C\u5728 SSR \u65F6\u88AB\u5E8F\u5217\u5316\uFF08serialized\uFF09\u3002")],-1),h=u("h3",{id:"6-\u5728\u63D2\u4EF6\u4E2D\u8C03\u7528-$subscribe\u3001$onaction",class:"doc-heading"},"\u5728\u63D2\u4EF6\u4E2D\u8C03\u7528 $subscribe\u3001$onAction",-1),_=u("h3",{id:"7-\u4F7F\u7528-store-\u7684-options",class:"doc-heading"},"\u4F7F\u7528 store \u7684 options",-1),b=u("p",null,"store",-1),g=u("h3",{id:"8-\u53EF\u4EE5\u6DFB\u52A0\u5168\u5C40\u7684-options-\u5417\uFF1F-\u53EF\u4EE5\u8BD5\u8BD5",class:"doc-heading"},"\u53EF\u4EE5\u6DFB\u52A0\u5168\u5C40\u7684 options \u5417\uFF1F \u53EF\u4EE5\u8BD5\u8BD5",-1),S={__name:"plugins",setup(f){const r=[{id:"doc-title",title:"plugins"},{id:"1-\u4F5C\u7528",title:"1. \u4F5C\u7528"},{id:"2-\u7B80\u4ECB",title:"2. \u7B80\u4ECB"},{id:"3-\u4F7F\u7528",title:"3. \u4F7F\u7528"},{id:"4-\u5C06\u4E00\u4E2A\u9759\u6001\u5C5E\u6027\u6DFB\u52A0\u5230\u6240\u6709-store-\u5B9E\u4F8B",title:"3.1. \u5C06\u4E00\u4E2A\u9759\u6001\u5C5E\u6027\u6DFB\u52A0\u5230\u6240\u6709 store \u5B9E\u4F8B",sub:!0},{id:"5-\u4E3A\u6240\u6709-store-\u6DFB\u52A0\u65B0\u7684-state",title:"3.2. \u4E3A\u6240\u6709 store \u6DFB\u52A0\u65B0\u7684 state",sub:!0},{id:"6-\u5728\u63D2\u4EF6\u4E2D\u8C03\u7528-$subscribe\u3001$onaction",title:"3.3. \u5728\u63D2\u4EF6\u4E2D\u8C03\u7528 $subscribe\u3001$onAction",sub:!0},{id:"7-\u4F7F\u7528-store-\u7684-options",title:"3.4. \u4F7F\u7528 store \u7684 options",sub:!0},{id:"8-\u53EF\u4EE5\u6DFB\u52A0\u5168\u5C40\u7684-options-\u5417\uFF1F-\u53EF\u4EE5\u8BD5\u8BD5",title:"3.5. \u53EF\u4EE5\u6DFB\u52A0\u5168\u5C40\u7684 options \u5417\uFF1F \u53EF\u4EE5\u8BD5\u8BD5",sub:!0}];return(m,v)=>{const t=e("doc-code"),i=e("doc-page");return n(),a(i,{desc:"",toc:r},{default:A(()=>[c,E,F,D,o(t,{code:"export%20function%20myPiniaPlugin%28context%29%20%7B%20//%20%u53EA%u6709%u4E00%u4E2A%u53C2%u6570%0A%20%20context.pinia%20//%20%u7528%20%60createPinia%28%29%60%20%u521B%u5EFA%u7684%20pinia%u3002%0A%20%20context.app%20//%20%u7528%20%60createApp%28%29%60%20%u521B%u5EFA%u7684%u5F53%u524D%u5E94%u7528%u7A0B%u5E8F%uFF08%u4EC5%20Vue%203%uFF09%u3002%0A%20%20context.store%20//%20%u8BE5%u63D2%u4EF6%u60F3%u6269%u5C55%u7684%20store%0A%20%20context.options%20//%20%u5B9A%u4E49%u4F20%u7ED9%20%60defineStore%28%29%60%20%u7684%20store%20%u7684%u53EF%u9009%u5BF9%u8C61%u3002%0A%20%20//%20...%0A%7D%0A",lang:"javascript"}),d,l,o(t,{code:"import%20%7B%20createPinia%20%7D%20from%20%27pinia%27%0A%0Aconst%20pinia%20%3D%20createPinia%28%29%0A%0A//%20%u4F46%u53EF%u4EE5%u7684%u8BDD%uFF0C%u8BF7%u4F7F%u7528%u8FD4%u56DE%u5BF9%u8C61%u7684%u65B9%u6CD5%uFF0C%u8FD9%u6837%u5B83%u4EEC%u5C31%u80FD%u88AB%20devtools%20%u81EA%u52A8%u8FFD%u8E2A%u5230%uFF1A%0Apinia.use%28%28%29%20%3D%3E%20%28%7B%20hello%3A%20%27world%27%20%7D%29%29%3B%0A%0Apinia.use%28%28%7B%20store%20%7D%29%20%3D%3E%20%7B%0A%20%20store.hello%20%3D%20%27world%27%0A%7D%29%0A%0A//%20%u6DFB%u52A0%u5931%u8D25%uFF0C%u56E0%u4E3A%20store%20%u91CC%u9762%u5DF2%u7ECF%u6709%u4E86%20router%20%u5C5E%u6027%0Apinia.use%28%28%7B%20store%20%7D%29%20%3D%3E%20%7B%0A%20%20store.router%20%3D%20markRaw%28%7B%20a%3A%20%27a%27%20%7D%29%3B%0A%7D%29%0A%0A//%20%u5728%u53E6%u4E00%u4E2A%u6587%u4EF6%u4E2D%0Aconst%20store%20%3D%20useStore%28%29%0Astore.hello%20//%20%27world%27%0A",lang:"javascript"}),B,C,p,o(t,{code:"pinia.use%28%28%7B%20store%20%7D%29%20%3D%3E%20%7B%0A%20%20//%20%u4E3A%u4E86%u6B63%u786E%u5730%u5904%u7406%20SSR%uFF0C%u6211%u4EEC%u9700%u8981%u786E%u4FDD%u6211%u4EEC%u6CA1%u6709%u91CD%u5199%u4EFB%u4F55%u4E00%u4E2A%0A%20%20//%20%u73B0%u6709%u7684%u503C%0A%20%20if%20%28%21Object.prototype.hasOwnProperty%28store.%24state%2C%20%27hasError%27%29%29%20%7B%0A%20%20%20%20//%20%u5728%u63D2%u4EF6%u4E2D%u5B9A%u4E49%20hasError%uFF0C%u56E0%u6B64%u6BCF%u4E2A%20store%20%u90FD%u6709%u5404%u81EA%u7684%0A%20%20%20%20//%20hasError%20%u72B6%u6001%0A%20%20%20%20const%20hasError%20%3D%20ref%28false%29%20//%20%u80AF%u5B9A%u4E5F%u4F1A%u4F7F%u7528%20ref%28%29%uFF08%u6216%u5176%u4ED6%u54CD%u5E94%u5F0F%20API%uFF09%uFF0C%u4EE5%u4FBF%u5728%u4E0D%u540C%u7684%u8BFB%u53D6%u4E2D%u5171%u4EAB%u76F8%u540C%u7684%u503C%uFF1A%0A%20%20%20%20//%20%u5728%20%60%24state%60%20%u4E0A%u8BBE%u7F6E%u53D8%u91CF%uFF0C%u5141%u8BB8%u5B83%u5728%20SSR%20%u671F%u95F4%u88AB%u5E8F%u5217%u5316%u3002%0A%20%20%20%20store.%24state.hasError%20%3D%20hasError%0A%20%20%7D%0A%20%20//%20%u6211%u4EEC%u9700%u8981%u5C06%20ref%20%u4ECE%20state%20%u8F6C%u79FB%u5230%20store%0A%20%20//%20%u8FD9%u6837%u7684%u8BDD%2C%u4E24%u79CD%u65B9%u5F0F%uFF1Astore.hasError%20%u548C%20store.%24state.hasError%20%u90FD%u53EF%u4EE5%u8BBF%u95EE%0A%20%20//%20%u5E76%u4E14%u5171%u4EAB%u7684%u662F%u540C%u4E00%u4E2A%u53D8%u91CF%0A%20%20//%20%u67E5%u770B%20https%3A//vuejs.org/api/reactivity-utilities.html%23toref%0A%20%20store.hasError%20%3D%20toRef%28store.%24state%2C%20%27hasError%27%29%0A%0A%20%20//%20%u5728%u8FD9%u79CD%u60C5%u51B5%u4E0B%uFF0C%u6700%u597D%u4E0D%u8981%u8FD4%u56DE%20%60hasError%60%0A%20%20//%20%u56E0%u4E3A%u5B83%u5C06%u88AB%u663E%u793A%u5728%20devtools%20%u7684%20%60state%60%20%u90E8%u5206%0A%20%20//%20%u5982%u679C%u6211%u4EEC%u8FD4%u56DE%u5B83%uFF0Cdevtools%20%u5C06%u663E%u793A%u4E24%u6B21%u3002%0A%7D%29%0A",lang:"javascript"}),h,o(t,{code:"pinia.use%28%28%7B%20store%20%7D%29%20%3D%3E%20%7B%0A%20%20store.%24subscribe%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20//%20%u54CD%u5E94%20store%20%u53D8%u5316%0A%20%20%7D%29%0A%20%20store.%24onAction%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20//%20%u54CD%u5E94%20store%20actions%0A%20%20%7D%29%0A%7D%29%0A",lang:"javascript"}),_,b,o(t,{code:"defineStore%28%0A%20%20%27search%27%2C%0A%20%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20//%20...%0A%20%20%7D%2C%0A%20%20%7B%0A%20%20%20%20//%20%u8FD9%u5C06%u5728%u540E%u9762%u88AB%u4E00%u4E2A%u63D2%u4EF6%u8BFB%u53D6%0A%20%20%20%20debounce%3A%20%7B%0A%20%20%20%20%20%20//%20%u8BA9%20action%20searchContacts%20%u9632%u6296%20300ms%0A%20%20%20%20%20%20searchContacts%3A%20300%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%0A%29%0A",lang:"javascript"}),o(t,{code:"//%20%u4F7F%u7528%u4EFB%u610F%u9632%u6296%u5E93%0Aimport%20debounce%20from%20%27lodash/debounce%27%0A%0Apinia.use%28%28%7B%20options%2C%20store%20%7D%29%20%3D%3E%20%7B%0A%20%20if%20%28options.debounce%29%20%7B%0A%20%20%20%20//%20%u6211%u4EEC%u6B63%u5728%u7528%u65B0%u7684%20action%20%u6765%u8986%u76D6%u8FD9%u4E9B%20action%0A%20%20%20%20return%20Object.keys%28options.debounce%29.reduce%28%28debouncedActions%2C%20action%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20debouncedActions%5Baction%5D%20%3D%20debounce%28%0A%20%20%20%20%20%20%20%20store%5Baction%5D%2C%0A%20%20%20%20%20%20%20%20options.debounce%5Baction%5D%0A%20%20%20%20%20%20%29%0A%20%20%20%20%20%20return%20debouncedActions%0A%20%20%20%20%7D%2C%20%7B%7D%29%0A%20%20%7D%0A%7D%29%0A",lang:"javascript"}),g]),_:1})}}};export{S as default};
