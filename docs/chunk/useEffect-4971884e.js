import{r as s,o as c,c as A,f as i,g as n,aa as e}from"./vendor-e1827163.js";const D=e("h2",{id:"1-\u8BA9\u60A8\u5728\u6E32\u67D3\u540E\u8FD0\u884C\u4E00\u4E9B\u4EE3\u7801",class:"doc-heading"},"\u8BA9\u60A8\u5728\u6E32\u67D3\u540E\u8FD0\u884C\u4E00\u4E9B\u4EE3\u7801",-1),B=e("h2",{id:"2-\u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\uFF0C\u4EE5\u5728\u7EC4\u4EF6\u5378\u8F7D\u65F6\u6216\u8005\u91CD\u65B0\u8FD0\u884C\u8BE5effect\u65F6\u8FD0\u884C\u6E05\u7406",class:"doc-heading"},"\u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\uFF0C\u4EE5\u5728\u7EC4\u4EF6\u5378\u8F7D\u65F6\u6216\u8005\u91CD\u65B0\u8FD0\u884C\u8BE5effect\u65F6\u8FD0\u884C\u6E05\u7406",-1),a=e("div",{class:"doc-note doc-note--warning"},[e("p",{class:"doc-note__title"},"WARNING"),e("p",null,'\u5728\u5F00\u53D1\u4E2D\uFF0CReact \u5C06\u7ACB\u5373\u8FD0\u884C\u5E76\u989D\u5916\u6E05\u7406\u4E00\u6B21 Effect\u3002\u8FD9\u5C31\u662F\u60A8\u770B\u5230"\u2705 Connecting\u2026"\u6253\u5370\u4E24\u6B21, "\u274C Disconnected."\u6253\u5370\u4E00\u6B21\u7684\u539F\u56E0\uFF08\u7EC4\u4EF6\u8FD8\u672A\u5378\u8F7D\uFF09\u3002\u8FD9\u786E\u4FDD\u60A8\u4E0D\u4F1A\u5FD8\u8BB0\u5B9E\u73B0\u6E05\u7406\u529F\u80FD'),e("p",null,"\u5728\u751F\u4EA7\u4E2D\u4E0D\u4F1A\u7ACB\u5373\u8FD0\u884C\u5E76\u989D\u5916\u6E05\u7406\u4E00\u6B21")],-1),r=e("h2",{id:"3-\u63A7\u5236\u975E-react-\u5C0F\u90E8\u4EF6",class:"doc-heading"},"\u63A7\u5236\u975E React \u5C0F\u90E8\u4EF6",-1),l=e("h2",{id:"4-\u8BA2\u9605\u4E8B\u4EF6",class:"doc-heading"},"\u8BA2\u9605\u4E8B\u4EF6",-1),d=e("h2",{id:"5-\u89E6\u53D1\u52A8\u753B",class:"doc-heading"},"\u89E6\u53D1\u52A8\u753B",-1),E=e("h2",{id:"6-\u521D\u59CB\u5316\u65F6\u83B7\u53D6\u6570\u636E",class:"doc-heading"},"\u521D\u59CB\u5316\u65F6\u83B7\u53D6\u6570\u636E",-1),f=e("p",null,"\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u6E05\u7406\u51FD\u6570\u6765\u5FFD\u7565\u9648\u65E7\u7684\u54CD\u5E94",-1),C=e("h2",{id:"7-\u4E3B\u4F53\u4E2D\u58F0\u660E\u7684\u6240\u6709\u53D8\u91CF\u90FD\u662F\u53CD\u5E94\u5F0F\u7684\uFF0C\u5982\u679C\u4F7F\u7528\u5230\u5FC5\u987B\u6DFB\u52A0\u5230\u4F9D\u8D56\u5217\u8868\u4E2D",class:"doc-heading"},"\u4E3B\u4F53\u4E2D\u58F0\u660E\u7684\u6240\u6709\u53D8\u91CF\u90FD\u662F\u53CD\u5E94\u5F0F\u7684\uFF0C\u5982\u679C\u4F7F\u7528\u5230\u5FC5\u987B\u6DFB\u52A0\u5230\u4F9D\u8D56\u5217\u8868\u4E2D",-1),h=e("h2",{id:"8-\u4F9D\u8D56\u9879\u4E3A\u5BF9\u8C61\u6216\u51FD\u6570",class:"doc-heading"},"\u4F9D\u8D56\u9879\u4E3A\u5BF9\u8C61\u6216\u51FD\u6570",-1),g=e("h2",{id:"9-\u4F7F\u7528\u66F4\u65B0\u51FD\u6570\u5220\u9664\u4F9D\u8D56",class:"doc-heading"},"\u4F7F\u7528\u66F4\u65B0\u51FD\u6570\u5220\u9664\u4F9D\u8D56",-1),m=e("p",null,"\u6211\u4EEC\u53EF\u4EE5\u4F20\u5165\u66F4\u65B0\u51FD\u6570",-1),F=e("h2",{id:"10-useeffectevent-\u526F\u4F5C\u7528\u4E8B\u4EF6\u5904\u7406-\uFF08\u5B9E\u9A8C\u7279\u6027\uFF09",class:"doc-heading"},"useEffectEvent \u526F\u4F5C\u7528\u4E8B\u4EF6\u5904\u7406 \uFF08\u5B9E\u9A8C\u7279\u6027\uFF09",-1),p=e("h3",{id:"11-\u53E6\u4E00\u4E2A\u4F8B\u5B50",class:"doc-heading"},"\u53E6\u4E00\u4E2A\u4F8B\u5B50",-1),v=e("p",null,"\u53EF\u4E0D\u53EF\u4EE5\u8FD9\u4E48\u5199\u5462",-1),_=e("p",null,"\u4E0A\u9762\u7684\u5199\u6CD5\u867D\u7136\u53EF\u4EE5\u5DE5\u4F5C\u4F46\u662F\u4E0D\u63A8\u8350\uFF0C\u5C24\u5176\u662F\u9047\u5230\u5F02\u6B65\u7684\u60C5\u51B5",-1),I=e("h3",{id:"12-\u4F7F\u7528\u65B9\u5F0F\u975E\u5E38\u6709\u9650",class:"doc-heading"},"\u4F7F\u7528\u65B9\u5F0F\u975E\u5E38\u6709\u9650",-1),x=e("ul",null,[e("li",null,"\u53EA\u80FD\u4ECE Effects \u5185\u90E8\u8C03\u7528\u5B83\u4EEC\u3002"),e("li",null,"\u6C38\u8FDC\u4E0D\u8981\u5C06\u5B83\u4EEC\u4F20\u9012\u7ED9\u5176\u4ED6\u7EC4\u4EF6\u6216 Hooks")],-1),y=e("p",null,"\u76F8\u53CD\uFF0C\u59CB\u7EC8\u76F4\u63A5\u5728\u4F7F\u7528\u5B83\u4EEC\u7684\u6548\u679C\u65C1\u8FB9\u58F0\u660E\u6548\u679C\u4E8B\u4EF6",-1),S=e("h2",{id:"13-\u53EF\u80FD\u4E0D\u9700\u8981\u7684\u573A\u5408",class:"doc-heading"},"\u53EF\u80FD\u4E0D\u9700\u8981\u7684\u573A\u5408",-1),j=e("h3",{id:"14-\u4F8B1",class:"doc-heading"},"\u4F8B1",-1),R=e("p",null,"\u6539",-1),k=e("h3",{id:"15-\u4F8B2",class:"doc-heading"},"\u4F8B2",-1),b=e("p",null,"\u6539",-1),P=e("p",null,"\u6539",-1),T=e("h2",{id:"16-\u4EC5\u5728\u5BA2\u6237\u7AEF\u4E0A\u8FD0\u884C\u3002\u5B83\u4EEC\u4E0D\u4F1A\u5728\u670D\u52A1\u5668\u6E32\u67D3\u671F\u95F4\u8FD0\u884C",class:"doc-heading"},"\u4EC5\u5728\u5BA2\u6237\u7AEF\u4E0A\u8FD0\u884C\u3002\u5B83\u4EEC\u4E0D\u4F1A\u5728\u670D\u52A1\u5668\u6E32\u67D3\u671F\u95F4\u8FD0\u884C",-1),N={__name:"useEffect",setup(w){const o=[{id:"doc-title",title:"useEffect"},{id:"1-\u8BA9\u60A8\u5728\u6E32\u67D3\u540E\u8FD0\u884C\u4E00\u4E9B\u4EE3\u7801",title:"1. \u8BA9\u60A8\u5728\u6E32\u67D3\u540E\u8FD0\u884C\u4E00\u4E9B\u4EE3\u7801"},{id:"2-\u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\uFF0C\u4EE5\u5728\u7EC4\u4EF6\u5378\u8F7D\u65F6\u6216\u8005\u91CD\u65B0\u8FD0\u884C\u8BE5effect\u65F6\u8FD0\u884C\u6E05\u7406",title:"2. \u8FD4\u56DE\u4E00\u4E2A\u51FD\u6570\uFF0C\u4EE5\u5728\u7EC4\u4EF6\u5378\u8F7D\u65F6\u6216\u8005\u91CD\u65B0\u8FD0\u884C\u8BE5effect\u65F6\u8FD0\u884C\u6E05\u7406"},{id:"3-\u63A7\u5236\u975E-react-\u5C0F\u90E8\u4EF6",title:"3. \u63A7\u5236\u975E React \u5C0F\u90E8\u4EF6"},{id:"4-\u8BA2\u9605\u4E8B\u4EF6",title:"4. \u8BA2\u9605\u4E8B\u4EF6"},{id:"5-\u89E6\u53D1\u52A8\u753B",title:"5. \u89E6\u53D1\u52A8\u753B"},{id:"6-\u521D\u59CB\u5316\u65F6\u83B7\u53D6\u6570\u636E",title:"6. \u521D\u59CB\u5316\u65F6\u83B7\u53D6\u6570\u636E"},{id:"7-\u4E3B\u4F53\u4E2D\u58F0\u660E\u7684\u6240\u6709\u53D8\u91CF\u90FD\u662F\u53CD\u5E94\u5F0F\u7684\uFF0C\u5982\u679C\u4F7F\u7528\u5230\u5FC5\u987B\u6DFB\u52A0\u5230\u4F9D\u8D56\u5217\u8868\u4E2D",title:"7. \u4E3B\u4F53\u4E2D\u58F0\u660E\u7684\u6240\u6709\u53D8\u91CF\u90FD\u662F\u53CD\u5E94\u5F0F\u7684\uFF0C\u5982\u679C\u4F7F\u7528\u5230\u5FC5\u987B\u6DFB\u52A0\u5230\u4F9D\u8D56\u5217\u8868\u4E2D"},{id:"8-\u4F9D\u8D56\u9879\u4E3A\u5BF9\u8C61\u6216\u51FD\u6570",title:"8. \u4F9D\u8D56\u9879\u4E3A\u5BF9\u8C61\u6216\u51FD\u6570"},{id:"9-\u4F7F\u7528\u66F4\u65B0\u51FD\u6570\u5220\u9664\u4F9D\u8D56",title:"9. \u4F7F\u7528\u66F4\u65B0\u51FD\u6570\u5220\u9664\u4F9D\u8D56"},{id:"10-useeffectevent-\u526F\u4F5C\u7528\u4E8B\u4EF6\u5904\u7406-\uFF08\u5B9E\u9A8C\u7279\u6027\uFF09",title:"10. useEffectEvent \u526F\u4F5C\u7528\u4E8B\u4EF6\u5904\u7406 \uFF08\u5B9E\u9A8C\u7279\u6027\uFF09"},{id:"11-\u53E6\u4E00\u4E2A\u4F8B\u5B50",title:"10.1. \u53E6\u4E00\u4E2A\u4F8B\u5B50",sub:!0},{id:"12-\u4F7F\u7528\u65B9\u5F0F\u975E\u5E38\u6709\u9650",title:"10.2. \u4F7F\u7528\u65B9\u5F0F\u975E\u5E38\u6709\u9650",sub:!0},{id:"13-\u53EF\u80FD\u4E0D\u9700\u8981\u7684\u573A\u5408",title:"11. \u53EF\u80FD\u4E0D\u9700\u8981\u7684\u573A\u5408"},{id:"14-\u4F8B1",title:"11.1. \u4F8B1",sub:!0},{id:"15-\u4F8B2",title:"11.2. \u4F8B2",sub:!0},{id:"16-\u4EC5\u5728\u5BA2\u6237\u7AEF\u4E0A\u8FD0\u884C\u3002\u5B83\u4EEC\u4E0D\u4F1A\u5728\u670D\u52A1\u5668\u6E32\u67D3\u671F\u95F4\u8FD0\u884C",title:"12. \u4EC5\u5728\u5BA2\u6237\u7AEF\u4E0A\u8FD0\u884C\u3002\u5B83\u4EEC\u4E0D\u4F1A\u5728\u670D\u52A1\u5668\u6E32\u67D3\u671F\u95F4\u8FD0\u884C"}];return(M,U)=>{const t=s("doc-code"),u=s("doc-page");return c(),A(u,{desc:"",toc:o},{default:i(()=>[D,n(t,{code:"import%20%7B%20useState%2C%20useRef%2C%20useEffect%20%7D%20from%20%27react%27%3B%0A%0Afunction%20VideoPlayer%28%7B%20src%2C%20isPlaying%20%7D%29%20%7B%0A%20%20const%20ref%20%3D%20useRef%28null%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20if%20%28isPlaying%29%20%7B%0A%20%20%20%20%20%20ref.current.play%28%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20ref.current.pause%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%5BisPlaying%5D%29%3B%0A%20%20//%20%u4E5F%u53EF%u4EE5%u4F9D%u8D56%20props%0A%20%20//%20ref%20%u53EF%u4F9D%u8D56%u53EF%u4E0D%u4F9D%u8D56%uFF0C%u4F46%u662F%u5982%u679C%u662F%u7236%u7EC4%u4EF6%u4F20%u8FC7%u6765%u7684%20ref%uFF0C%u90A3%u4E48%u5C31%u5FC5%u987B%u4F9D%u8D56%0A%20%20return%20%3Cvideo%20ref%3D%7Bref%7D%20src%3D%7Bsrc%7D%20loop%20playsInline%20/%3E%3B%0A%7D%0A",lang:"jsx"}),n(t,{code:"useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20//%20This%20runs%20after%20every%20render%0A%7D%29%3B%0A%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20//%20This%20runs%20only%20on%20mount%20%28when%20the%20component%20appears%29%0A%7D%2C%20%5B%5D%29%3B%0A%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20//%20This%20runs%20on%20mount%20*and%20also*%20if%20either%20a%20or%20b%20have%20changed%20since%20the%20last%20render%0A%20%20//%20%u5982%u679C%u6709%u4F9D%u8D56%u5217%u8868%uFF0C%u4F46%u662F%u5217%u8868%u4E2D%u7684%u503C%u548C%u81EA%u52A8%u6536%u96C6%u7684%u4F9D%u8D56%u503C%u4E0D%u4E00%u6837%uFF08Object.is%u6BD4%u8F83%uFF09eslint%u4F1A%u62A5%u9519%0A%7D%2C%20%5Ba%2C%20b%5D%29%3B%0A",lang:"jsx"}),B,n(t,{code:"import%20%7B%20useState%2C%20useEffect%20%7D%20from%20%27react%27%3B%0Aimport%20%7B%20createConnection%20%7D%20from%20%27./chat.js%27%3B%0A%0Aexport%20default%20function%20ChatRoom%28%29%20%7B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20connection%20%3D%20createConnection%28%29%3B%0A%20%20%20%20connection.connect%28%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20connection.disconnect%28%29%3B%0A%20%20%7D%2C%20%5B%5D%29%3B%0A%20%20return%20%3Ch1%3EWelcome%20to%20the%20chat%21%3C/h1%3E%3B%0A%7D%0A",lang:"jsx"}),a,r,n(t,{code:"useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20const%20map%20%3D%20mapRef.current%3B%0A%20%20map.setZoomLevel%28zoomLevel%29%3B%0A%20%20//%20%u4E0D%u9700%u8981%u6E05%u7406%0A%7D%2C%20%5BzoomLevel%5D%29%3B%0A%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20const%20dialog%20%3D%20dialogRef.current%3B%0A%20%20dialog.showModal%28%29%3B%0A%20%20return%20%28%29%20%3D%3E%20dialog.close%28%29%3B%0A%20%20//%20%u9700%u8981%u6E05%u7406%uFF0C%u751F%u4EA7%u5E94%u8BE5%u6CA1%u95EE%u9898%0A%7D%2C%20%5B%5D%29%3B%0A",lang:"jsx"}),l,n(t,{code:"useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20function%20handleScroll%28e%29%20%7B%0A%20%20%20%20console.log%28window.scrollX%2C%20window.scrollY%29%3B%0A%20%20%7D%0A%20%20window.addEventListener%28%27scroll%27%2C%20handleScroll%29%3B%0A%20%20return%20%28%29%20%3D%3E%20window.removeEventListener%28%27scroll%27%2C%20handleScroll%29%3B%0A%7D%2C%20%5B%5D%29%3B%0A",lang:"jsx"}),d,n(t,{code:"useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20const%20node%20%3D%20ref.current%3B%0A%20%20node.style.opacity%20%3D%201%3B%20//%20Trigger%20the%20animation%0A%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20node.style.opacity%20%3D%200%3B%20//%20Reset%20to%20the%20initial%20value%0A%20%20%7D%3B%0A%7D%2C%20%5B%5D%29%3B%0A",lang:"jsx"}),E,n(t,{code:"function%20SearchResults%28%7B%20query%20%7D%29%20%7B%0A%20%20const%20%5Bresults%2C%20setResults%5D%20%3D%20useState%28%5B%5D%29%3B%0A%20%20const%20%5Bpage%2C%20setPage%5D%20%3D%20useState%281%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20//%20%uD83D%uDD34%20Avoid%3A%20Fetching%20without%20cleanup%20logic%0A%20%20%20%20//%20%u800C%u4E14%u5F00%u53D1%u73AF%u5883%u4F1A%u8BF7%u6C42%u4E24%u904D%0A%20%20%20%20//%20%u800C%u4E14query%u53D8%u5316%u65F6%uFF0C%u540E%u8BF7%u6C42%u7684%u63A5%u53E3%u53EF%u80FD%u5148%u8FD4%u56DE%uFF0C%u5BFC%u81F4%u7ED3%u679C%u9519%u4E71%0A%20%20%20%20fetchResults%28query%2C%20page%29.then%28json%20%3D%3E%20%7B%0A%20%20%20%20%20%20setResults%28json%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%2C%20%5Bquery%2C%20page%5D%29%3B%0A%0A%20%20function%20handleNextPageClick%28%29%20%7B%0A%20%20%20%20setPage%28page%20+%201%29%3B%0A%20%20%7D%0A%20%20//%20...%0A%7D%0A",lang:"jsx"}),f,n(t,{code:"function%20SearchResults%28%7B%20query%20%7D%29%20%7B%0A%20%20const%20%5Bresults%2C%20setResults%5D%20%3D%20useState%28%5B%5D%29%3B%0A%20%20const%20%5Bpage%2C%20setPage%5D%20%3D%20useState%281%29%3B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20let%20ignore%20%3D%20false%3B%0A%20%20%20%20fetchResults%28query%2C%20page%29.then%28json%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20%28%21ignore%29%20%7B%0A%20%20%20%20%20%20%20%20setResults%28json%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20ignore%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5Bquery%2C%20page%5D%29%3B%0A%0A%20%20function%20handleNextPageClick%28%29%20%7B%0A%20%20%20%20setPage%28page%20+%201%29%3B%0A%20%20%7D%0A%7D%0A",lang:"jsx"}),C,n(t,{code:"function%20ChatRoom%28%7B%20roomId%2C%20selectedServerUrl%20%7D%29%20%7B%20//%20roomId%20is%20reactive%0A%20%20const%20settings%20%3D%20useContext%28SettingsContext%29%3B%20//%20settings%20is%20reactive%0A%20%20const%20serverUrl%20%3D%20selectedServerUrl%20%3F%3F%20settings.defaultServerUrl%3B%20//%20serverUrl%20is%20reactive%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20connection%20%3D%20createConnection%28serverUrl%2C%20roomId%29%3B%20//%20Your%20Effect%20reads%20roomId%20and%20serverUrl%0A%20%20%20%20connection.connect%28%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20connection.disconnect%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5BroomId%2C%20serverUrl%5D%29%3B%20//%20So%20it%20needs%20to%20re-synchronize%20when%20either%20of%20them%20changes%21%0A%20%20//%20...%0A%7D%0A",lang:"jsx"}),h,n(t,{code:"const%20options%20%3D%20%7B%7D%3B%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%7D%2C%20%5Boptions%5D%29%3B%0A//%20%u6BCF%u6B21%u6E32%u67D3%u90FD%u4F1A%u91CD%u65B0%u6E32%u67D3%u4E00%u6B21%u526F%u4F5C%u7528%0A",lang:"jsx"}),g,n(t,{code:"function%20ChatRoom%28%7B%20roomId%20%7D%29%20%7B%0Aconst%20%5Bmessages%2C%20setMessages%5D%20%3D%20useState%28%5B%5D%29%3B%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20const%20connection%20%3D%20createConnection%28%29%3B%0A%20%20connection.connect%28%29%3B%0A%20%20connection.on%28%27message%27%2C%20%28receivedMessage%29%20%3D%3E%20%7B%0A%20%20%20%20setMessages%28%5B...messages%2C%20receivedMessage%5D%29%3B%0A%20%20%7D%29%3B%0A%20%20return%20%28%29%20%3D%3E%20connection.disconnect%28%29%3B%0A%7D%2C%20%5BroomId%2C%20messages%5D%29%3B%20//%20%u6B64%u5904%u4E0D%u80FD%u4F9D%u8D56%20messages%0A",lang:"jsx"}),m,n(t,{code:"function%20ChatRoom%28%7B%20roomId%20%7D%29%20%7B%0Aconst%20%5Bmessages%2C%20setMessages%5D%20%3D%20useState%28%5B%5D%29%3B%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20const%20connection%20%3D%20createConnection%28%29%3B%0A%20%20connection.connect%28%29%3B%0A%20%20connection.on%28%27message%27%2C%20%28receivedMessage%29%20%3D%3E%20%7B%0A%20%20%20%20//%20%u5F53%u7136%u4E5F%u53EF%u4EE5%u653E%u5230%20useEffectEvent%20%u91CC%u9762%0A%20%20%20%20setMessages%28msgs%20%3D%3E%20%5B...msgs%2C%20receivedMessage%5D%29%3B%0A%20%20%7D%29%3B%0A%20%20return%20%28%29%20%3D%3E%20connection.disconnect%28%29%3B%0A%7D%2C%20%5BroomId%5D%29%3B%0A",lang:"jsx"}),F,n(t,{code:"import%20%7B%20useState%2C%20useEffect%20%7D%20from%20%27react%27%3B%0Aimport%20%7B%20experimental_useEffectEvent%20as%20useEffectEvent%20%7D%20from%20%27react%27%3B%0Aimport%20%7B%20createConnection%2C%20sendMessage%20%7D%20from%20%27./chat.js%27%3B%0Aimport%20%7B%20showNotification%20%7D%20from%20%27./notifications.js%27%3B%0A%0Aconst%20serverUrl%20%3D%20%27https%3A//localhost%3A1234%27%3B%0A%0Afunction%20ChatRoom%28%7B%20roomId%2C%20theme%20%7D%29%20%7B%0A%20%20const%20onConnected%20%3D%20useEffectEvent%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20showNotification%28%27Connected%21%27%2C%20theme%29%3B%0A%20%20%7D%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20connection%20%3D%20createConnection%28serverUrl%2C%20roomId%29%3B%0A%20%20%20%20connection.on%28%27connected%27%2C%20onConnected%29%3B%20//%20theme%20%u4E0D%u80FD%u653E%u5728%u4F9D%u8D56%u5217%u8868%u4E2D%uFF0C%u6240%u4EE5%u53EA%u80FD%u5199%u5728%u4E0A%u9762%0A%20%20%20%20connection.connect%28%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20connection.disconnect%28%29%3B%0A%20%20%7D%2C%20%5BroomId%5D%29%3B%0A%0A%20%20return%20%3Ch1%3EWelcome%20to%20the%20%7BroomId%7D%20room%21%3C/h1%3E%0A%7D%0A%0Aexport%20default%20function%20App%28%29%20%7B%0A%20%20const%20%5BroomId%2C%20setRoomId%5D%20%3D%20useState%28%27general%27%29%3B%0A%20%20const%20%5BisDark%2C%20setIsDark%5D%20%3D%20useState%28false%29%3B%0A%20%20return%20%28%0A%20%20%20%20%3C%3E%0A%20%20%20%20%20%20%3Clabel%3E%0A%20%20%20%20%20%20%20%20Choose%20the%20chat%20room%3A%7B%27%20%27%7D%0A%20%20%20%20%20%20%20%20%3Cselect%0A%20%20%20%20%20%20%20%20%20%20value%3D%7BroomId%7D%0A%20%20%20%20%20%20%20%20%20%20onChange%3D%7Be%20%3D%3E%20setRoomId%28e.target.value%29%7D%0A%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%3Coption%20value%3D%22general%22%3Egeneral%3C/option%3E%0A%20%20%20%20%20%20%20%20%20%20%3Coption%20value%3D%22travel%22%3Etravel%3C/option%3E%0A%20%20%20%20%20%20%20%20%20%20%3Coption%20value%3D%22music%22%3Emusic%3C/option%3E%0A%20%20%20%20%20%20%20%20%3C/select%3E%0A%20%20%20%20%20%20%3C/label%3E%0A%20%20%20%20%20%20%3Clabel%3E%0A%20%20%20%20%20%20%20%20%3Cinput%0A%20%20%20%20%20%20%20%20%20%20type%3D%22checkbox%22%0A%20%20%20%20%20%20%20%20%20%20checked%3D%7BisDark%7D%0A%20%20%20%20%20%20%20%20%20%20onChange%3D%7Be%20%3D%3E%20setIsDark%28e.target.checked%29%7D%0A%20%20%20%20%20%20%20%20/%3E%0A%20%20%20%20%20%20%20%20Use%20dark%20theme%0A%20%20%20%20%20%20%3C/label%3E%0A%20%20%20%20%20%20%3Chr%20/%3E%0A%20%20%20%20%20%20%3CChatRoom%0A%20%20%20%20%20%20%20%20roomId%3D%7BroomId%7D%0A%20%20%20%20%20%20%20%20theme%3D%7BisDark%20%3F%20%27dark%27%20%3A%20%27light%27%7D%0A%20%20%20%20%20%20/%3E%0A%20%20%20%20%3C/%3E%0A%20%20%29%3B%0A%7D%0A",lang:"jsx"}),p,n(t,{code:"const%20onVisit%20%3D%20useEffectEvent%28visitedUrl%20%3D%3E%20%7B%0A%20%20//%20%u8C03%u7528%u65E5%u5FD7%u4F1A%u7528%u5230%20numberOfItems%uFF0C%u6240%u4EE5%u653E%u5230event%u91CC%u9762%0A%20%20logVisit%28visitedUrl%2C%20numberOfItems%29%3B%0A%7D%29%3B%0A//%20url%20%u6539%u53D8%u65F6%u89E6%u53D1%u65E5%u5FD7%u8C03%u7528%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20onVisit%28url%29%3B%0A%7D%2C%20%5Burl%5D%29%3B%0A",lang:"jsx"}),v,n(t,{code:"const%20onVisit%20%3D%20useEffectEvent%28%28%29%20%3D%3E%20%7B%0A%20%20logVisit%28url%2C%20numberOfItems%29%3B%0A%7D%29%3B%0A%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20onVisit%28%29%3B%0A%7D%2C%20%5Burl%5D%29%3B%0A",lang:"jsx"}),_,n(t,{code:"const%20onVisit%20%3D%20useEffectEvent%28%28%29%20%3D%3E%20%7B%0A%20%20logVisit%28url%2C%20numberOfItems%29%3B%0A%7D%29%3B%0A%0AuseEffect%28%28%29%20%3D%3E%20%7B%0A%20%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20onVisit%28%29%3B%0A%20%20%7D%2C%205000%29%3B%0A%7D%2C%20%5Burl%5D%29%3B%0A//%20TODO%20%u6B64%u5904%u7684url%u4F1A%u4E0D%u4F1A%u662F%u4E00%u6837%u7684%u5462%uFF1F%0A",lang:"jsx"}),I,x,n(t,{code:"function%20Timer%28%29%20%7B%0A%20%20const%20%5Bcount%2C%20setCount%5D%20%3D%20useState%280%29%3B%0A%20%20const%20onTick%20%3D%20useEffectEvent%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20setCount%28count%20+%201%29%3B%0A%20%20%7D%29%3B%0A%20%20useTimer%28onTick%2C%201000%29%3B%20//%20%uD83D%uDD34%20Avoid%3A%20Passing%20Effect%20Events%0A%20%20return%20%3Ch1%3E%7Bcount%7D%3C/h1%3E%0A%7D%0A%0Afunction%20useTimer%28callback%2C%20delay%29%20%7B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20id%20%3D%20setInterval%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%7D%2C%20delay%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20clearInterval%28id%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5Bdelay%2C%20callback%5D%29%3B%20//%20Need%20to%20specify%20%22callback%22%20in%20dependencies%0A%7D%0A",lang:"jsx"}),y,n(t,{code:"function%20Timer%28%29%20%7B%0A%20%20const%20%5Bcount%2C%20setCount%5D%20%3D%20useState%280%29%3B%0A%20%20useTimer%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20setCount%28count%20+%201%29%3B%0A%20%20%7D%2C%201000%29%3B%0A%20%20return%20%3Ch1%3E%7Bcount%7D%3C/h1%3E%0A%7D%0A%0Afunction%20useTimer%28callback%2C%20delay%29%20%7B%0A%20%20const%20onTick%20%3D%20useEffectEvent%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20callback%28%29%3B%0A%20%20%7D%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20id%20%3D%20setInterval%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20onTick%28%29%3B%20//%20%u2705%20Good%3A%20Only%20called%20locally%20inside%20an%20Effect%0A%20%20%20%20%7D%2C%20delay%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20clearInterval%28id%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5Bdelay%5D%29%3B%20//%20No%20need%20to%20specify%20%22onTick%22%20%28an%20Effect%20Event%29%20as%20a%20dependency%0A%7D%0A",lang:"jsx"}),S,j,n(t,{code:"export%20default%20function%20ProfilePage%28%7B%20userId%20%7D%29%20%7B%0A%20%20const%20%5Bcomment%2C%20setComment%5D%20%3D%20useState%28%27%27%29%3B%0A%0A%20%20//%20%uD83D%uDD34%20Avoid%3A%20Resetting%20state%20on%20prop%20change%20in%20an%20Effect%0A%20%20//%20%u5E0C%u671BuserId%u6539%u53D8%u65F6%uFF0Ccomment%u91CD%u7F6E%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20console.log%28%27userId%20changed%21%27%29%3B%20//%20TODO%20%u4F1A%u6253%u5370%u51E0%u6B21%0A%20%20%20%20setComment%28%27%27%29%3B%0A%20%20%7D%2C%20%5BuserId%5D%29%3B%0A%7D%0A",lang:"jsx"}),R,n(t,{code:"export%20default%20function%20ProfilePage%28%7B%20userId%20%7D%29%20%7B%0A%20%20return%20%28%0A%20%20%20%20%3CProfile%0A%20%20%20%20%20%20userId%3D%7BuserId%7D%0A%20%20%20%20%20%20key%3D%7BuserId%7D%20//%20%u6DFB%u52A0key%u503C%0A%20%20%20%20/%3E%0A%20%20%29%3B%0A%7D%0A",lang:"jsx"}),k,n(t,{code:"function%20List%28%7B%20items%20%7D%29%20%7B%0A%20%20const%20%5BisReverse%2C%20setIsReverse%5D%20%3D%20useState%28false%29%3B%0A%20%20const%20%5Bselection%2C%20setSelection%5D%20%3D%20useState%28null%29%3B%0A%0A%20%20//%20%uD83D%uDD34%20Avoid%3A%20Adjusting%20state%20on%20prop%20change%20in%20an%20Effect%0A%20%20//%20%u5217%u8868%u53D8%u5316%u65F6%uFF0C%u91CD%u7F6E%u9009%u62E9%uFF0C%u4F1A%u5BFC%u81F4%u9009%u62E9%u95EA%u70C1%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20setSelection%28null%29%3B%0A%20%20%7D%2C%20%5Bitems%5D%29%3B%0A%7D%0A",lang:"jsx"}),b,n(t,{code:"const%20%5BprevItems%2C%20setPrevItems%5D%20%3D%20useState%28items%29%3B%0Aif%20%28items%20%21%3D%3D%20prevItems%29%20%7B%0A%20%20setPrevItems%28items%29%3B%0A%20%20setSelection%28null%29%3B%0A%7D%0A",lang:"jsx"}),P,n(t,{code:"function%20List%28%7B%20items%20%7D%29%20%7B%0A%20%20const%20%5BisReverse%2C%20setIsReverse%5D%20%3D%20useState%28false%29%3B%0A%20%20const%20%5BselectedId%2C%20setSelectedId%5D%20%3D%20useState%28null%29%3B%0A%20%20//%20%u2705%20Best%3A%20Calculate%20everything%20during%20rendering%0A%20%20const%20selection%20%3D%20items.find%28item%20%3D%3E%20item.id%20%3D%3D%3D%20selectedId%29%20%3F%3F%20null%3B%0A%7D%0A",lang:"jsx"}),T,n(t,{code:"function%20MyComponent%28%29%20%7B%0A%20%20const%20%5BdidMount%2C%20setDidMount%5D%20%3D%20useState%28false%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20setDidMount%28true%29%3B%0A%20%20%7D%2C%20%5B%5D%29%3B%0A%0A%20%20if%20%28didMount%29%20%7B%0A%20%20%20%20//%20...%20return%20client-only%20JSX%20...%0A%20%20%7D%20%20else%20%7B%0A%20%20%20%20//%20...%20return%20initial%20JSX%20...%0A%20%20%7D%0A%7D%0A",lang:"jsx"})]),_:1})}}};export{N as default};
