import{r as s,o as i,c as l,f as d,g as o,a8 as e,v as t}from"./vendor-5a734afa.js";const r=e("h2",{id:"1-json-parse-json-stringify-",class:"doc-heading"},[e("code",{class:"doc-token"},"JSON.parse(JSON.stringify())")],-1),p=e("h3",{id:"2-undefined\u3001symbol\u548C\u51FD\u6570\u51FA\u73B0\u5728\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u503C\u4E2D\u65F6\u4F1A\u5FFD\u7565-\u4F5C\u4E3A\u5C5E\u6027key\u4E5F\u4F1A\u5FFD\u7565\uFF0C\u51FA\u73B0\u5728\u6570\u7EC4\u4E2D\u65F6\u4F1A\u8F6C\u4E3Anull",class:"doc-heading"},[e("code",{class:"doc-token"},"undefined"),t("\u3001"),e("code",{class:"doc-token"},"symbol"),t("\u548C"),e("code",{class:"doc-token"},"\u51FD\u6570"),t("\u51FA\u73B0\u5728\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u503C\u4E2D\u65F6\u4F1A\u5FFD\u7565,\u4F5C\u4E3A\u5C5E\u6027key\u4E5F\u4F1A\u5FFD\u7565\uFF0C\u51FA\u73B0\u5728\u6570\u7EC4\u4E2D\u65F6\u4F1A\u8F6C\u4E3Anull")],-1),u=e("h3",{id:"3-\u5BF9\u8C61\u5FAA\u73AF\u5F15\u7528\u65F6\uFF0C\u4F1A\u62A5\u9519",class:"doc-heading"},"\u5BF9\u8C61\u5FAA\u73AF\u5F15\u7528\u65F6\uFF0C\u4F1A\u62A5\u9519",-1),y=e("h3",{id:"4-\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u7684\u5305\u88C5\u5BF9\u8C61\u5728\u5E8F\u5217\u5316\u8FC7\u7A0B\u4E2D\u4F1A\u81EA\u52A8\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u539F\u59CB\u503C",class:"doc-heading"},"\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u7684\u5305\u88C5\u5BF9\u8C61\u5728\u5E8F\u5217\u5316\u8FC7\u7A0B\u4E2D\u4F1A\u81EA\u52A8\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u539F\u59CB\u503C",-1),b=e("h3",{id:"5-nan-\u548C-infinity-\u683C\u5F0F\u7684\u6570\u503C\u53CA-null-\u90FD\u4F1A\u88AB\u5F53\u505A-null",class:"doc-heading"},"NaN \u548C Infinity \u683C\u5F0F\u7684\u6570\u503C\u53CA null \u90FD\u4F1A\u88AB\u5F53\u505A null",-1),h=e("h3",{id:"6-\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u4E0D\u80FD\u4FDD\u8BC1\u4EE5\u7279\u5B9A\u7684\u987A\u5E8F\u51FA\u73B0\u5728\u5E8F\u5217\u5316\u540E\u7684\u5B57\u7B26\u4E32\u4E2D",class:"doc-heading"},"\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u4E0D\u80FD\u4FDD\u8BC1\u4EE5\u7279\u5B9A\u7684\u987A\u5E8F\u51FA\u73B0\u5728\u5E8F\u5217\u5316\u540E\u7684\u5B57\u7B26\u4E32\u4E2D",-1),j=e("h3",{id:"7-\u8F6C\u6362\u503C\u5982\u679C\u6709-tojson-\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5B9A\u4E49\u4EC0\u4E48\u503C\u5C06\u88AB\u5E8F\u5217\u5316",class:"doc-heading"},"\u8F6C\u6362\u503C\u5982\u679C\u6709 toJSON() \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5B9A\u4E49\u4EC0\u4E48\u503C\u5C06\u88AB\u5E8F\u5217\u5316",-1),g=e("h3",{id:"8-date-\u65E5\u671F\u8C03\u7528\u4E86-tojson-\u5C06\u5176\u8F6C\u6362\u4E3A\u4E86-string-\u5B57\u7B26\u4E32\uFF08\u540Cdate-toisostring-\uFF09\uFF0C\u56E0\u6B64\u4F1A\u88AB\u5F53\u505A\u5B57\u7B26\u4E32\u5904\u7406",class:"doc-heading"},"Date \u65E5\u671F\u8C03\u7528\u4E86 toJSON() \u5C06\u5176\u8F6C\u6362\u4E3A\u4E86 string \u5B57\u7B26\u4E32\uFF08\u540CDate.toISOString()\uFF09\uFF0C\u56E0\u6B64\u4F1A\u88AB\u5F53\u505A\u5B57\u7B26\u4E32\u5904\u7406",-1),_=e("h3",{id:"9-\u5176\u4ED6\u7C7B\u578B\u7684\u5BF9\u8C61\uFF0C\u5305\u62EC-map-set-weakmap-weakset\uFF0C\u4EC5\u4F1A\u5E8F\u5217\u5316\u53EF\u679A\u4E3E\u7684\u5C5E\u6027",class:"doc-heading"},"\u5176\u4ED6\u7C7B\u578B\u7684\u5BF9\u8C61\uFF0C\u5305\u62EC Map/Set/WeakMap/WeakSet\uFF0C\u4EC5\u4F1A\u5E8F\u5217\u5316\u53EF\u679A\u4E3E\u7684\u5C5E\u6027",-1),f=e("h2",{id:"10-\u81EA\u5DF1\u5199",class:"doc-heading"},"\u81EA\u5DF1\u5199",-1),N={__name:"\u5B9E\u73B0\u6DF1\u62F7\u8D1D",setup(k){const a=[{id:"doc-title",title:"\u5B9E\u73B0\u6DF1\u62F7\u8D1D"},{id:"1-json-parse-json-stringify-",title:"1. JSON.parse(JSON.stringify())"},{id:"2-undefined\u3001symbol\u548C\u51FD\u6570\u51FA\u73B0\u5728\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u503C\u4E2D\u65F6\u4F1A\u5FFD\u7565-\u4F5C\u4E3A\u5C5E\u6027key\u4E5F\u4F1A\u5FFD\u7565\uFF0C\u51FA\u73B0\u5728\u6570\u7EC4\u4E2D\u65F6\u4F1A\u8F6C\u4E3Anull",title:"1.1. undefined\u3001symbol\u548C\u51FD\u6570\u51FA\u73B0\u5728\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u503C\u4E2D\u65F6\u4F1A\u5FFD\u7565,\u4F5C\u4E3A\u5C5E\u6027key\u4E5F\u4F1A\u5FFD\u7565\uFF0C\u51FA\u73B0\u5728\u6570\u7EC4\u4E2D\u65F6\u4F1A\u8F6C\u4E3Anull",sub:!0},{id:"3-\u5BF9\u8C61\u5FAA\u73AF\u5F15\u7528\u65F6\uFF0C\u4F1A\u62A5\u9519",title:"1.2. \u5BF9\u8C61\u5FAA\u73AF\u5F15\u7528\u65F6\uFF0C\u4F1A\u62A5\u9519",sub:!0},{id:"4-\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u7684\u5305\u88C5\u5BF9\u8C61\u5728\u5E8F\u5217\u5316\u8FC7\u7A0B\u4E2D\u4F1A\u81EA\u52A8\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u539F\u59CB\u503C",title:"1.3. \u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u7684\u5305\u88C5\u5BF9\u8C61\u5728\u5E8F\u5217\u5316\u8FC7\u7A0B\u4E2D\u4F1A\u81EA\u52A8\u8F6C\u6362\u6210\u5BF9\u5E94\u7684\u539F\u59CB\u503C",sub:!0},{id:"5-nan-\u548C-infinity-\u683C\u5F0F\u7684\u6570\u503C\u53CA-null-\u90FD\u4F1A\u88AB\u5F53\u505A-null",title:"1.4. NaN \u548C Infinity \u683C\u5F0F\u7684\u6570\u503C\u53CA null \u90FD\u4F1A\u88AB\u5F53\u505A null",sub:!0},{id:"6-\u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u4E0D\u80FD\u4FDD\u8BC1\u4EE5\u7279\u5B9A\u7684\u987A\u5E8F\u51FA\u73B0\u5728\u5E8F\u5217\u5316\u540E\u7684\u5B57\u7B26\u4E32\u4E2D",title:"1.5. \u975E\u6570\u7EC4\u5BF9\u8C61\u7684\u5C5E\u6027\u4E0D\u80FD\u4FDD\u8BC1\u4EE5\u7279\u5B9A\u7684\u987A\u5E8F\u51FA\u73B0\u5728\u5E8F\u5217\u5316\u540E\u7684\u5B57\u7B26\u4E32\u4E2D",sub:!0},{id:"7-\u8F6C\u6362\u503C\u5982\u679C\u6709-tojson-\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5B9A\u4E49\u4EC0\u4E48\u503C\u5C06\u88AB\u5E8F\u5217\u5316",title:"1.6. \u8F6C\u6362\u503C\u5982\u679C\u6709 toJSON() \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5B9A\u4E49\u4EC0\u4E48\u503C\u5C06\u88AB\u5E8F\u5217\u5316",sub:!0},{id:"8-date-\u65E5\u671F\u8C03\u7528\u4E86-tojson-\u5C06\u5176\u8F6C\u6362\u4E3A\u4E86-string-\u5B57\u7B26\u4E32\uFF08\u540Cdate-toisostring-\uFF09\uFF0C\u56E0\u6B64\u4F1A\u88AB\u5F53\u505A\u5B57\u7B26\u4E32\u5904\u7406",title:"1.7. Date \u65E5\u671F\u8C03\u7528\u4E86 toJSON() \u5C06\u5176\u8F6C\u6362\u4E3A\u4E86 string \u5B57\u7B26\u4E32\uFF08\u540CDate.toISOString()\uFF09\uFF0C\u56E0\u6B64\u4F1A\u88AB\u5F53\u505A\u5B57\u7B26\u4E32\u5904\u7406",sub:!0},{id:"9-\u5176\u4ED6\u7C7B\u578B\u7684\u5BF9\u8C61\uFF0C\u5305\u62EC-map-set-weakmap-weakset\uFF0C\u4EC5\u4F1A\u5E8F\u5217\u5316\u53EF\u679A\u4E3E\u7684\u5C5E\u6027",title:"1.8. \u5176\u4ED6\u7C7B\u578B\u7684\u5BF9\u8C61\uFF0C\u5305\u62EC Map/Set/WeakMap/WeakSet\uFF0C\u4EC5\u4F1A\u5E8F\u5217\u5316\u53EF\u679A\u4E3E\u7684\u5C5E\u6027",sub:!0},{id:"10-\u81EA\u5DF1\u5199",title:"2. \u81EA\u5DF1\u5199"}];return(O,m)=>{const n=s("doc-code"),c=s("doc-page");return i(),l(c,{desc:"",toc:a},{default:d(()=>[r,o(n,{code:`function deepCopy (obj) {
  try {
    return JSON.parse(JSON.stringify(obj))
  } catch (e) {
   console.error('error to deepCopy: ' + e.message)
  }
}
`,lang:"javascript"}),p,o(n,{code:`let obj = {
  name: 'A',
  name1: undefined,
  name3: function() {},
  name4: Symbol('A'),
  name5: [undefined, function () {}, Symbol('A')],
  [Symbol('B')]: 'b',
}
console.log(deepCopy(obj)) // { name: 'A', name5: [ null, null, null ] }
`,lang:"javascript"}),u,o(n,{code:`let obj = {
  a: {
    b: 'B',
  },
}
obj.a.b = obj.a
console.log(deepCopy(obj)) // error to deepCopy: Converting circular structure to JSON
`,lang:"javascript"}),y,o(n,{code:`let obj = {
  a: new Boolean(true),
  b: new Number(1),
  c: new String('c'),
}
console.log(deepCopy(obj)) // { a: true, b: 1, c: 'c' }
`,lang:"javascript"}),b,o(n,{code:`let obj = {
  a: 1 / 0,
  b: NaN,
  c: null,
}
console.log(deepCopy(obj)) // { a: null, b: null, c: null }
`,lang:"javascript"}),h,j,g,o(n,{code:`let obj = {
  a: new Date(),
}
console.log(deepCopy(obj)) // { a: '2021-03-26T10:26:40.129Z' }
`,lang:"javascript"}),_,f,o(n,{code:`function isObject (o) {
  return typeof o === 'object' && o !== null
}

function deepCopy (o, hash = new WeakMap()) {
  if (!isObject(o)) return o
  if (hash.has(o)) return hash.get(o)
  let copyObj = Array.isArray(o) ? [] : {}
  // \u65B9\u6CD51
  // \u95EE\u9898\uFF1A\u6CA1\u6709\u590D\u5236\u539F\u578B\u4E0A\u9762\u7684\u5C5E\u6027\uFF08\u5927\u90E8\u5206\u60C5\u51B5\u4E5F\u4E0D\u9700\u8981\uFF09
  const descriptor = Object.getOwnPropertyDescriptors(o)
  const keys = [...Object.getOwnPropertyNames(o), ...Object.getOwnPropertySymbols(o)]
  keys.forEach(key => {
    const value = descriptor[key].value
    if (isObject(value)) {
      Object.defineProperty(copyObj, key, Object.assign({
        value: deepCopy(value, hash),
      }, descriptor[key]))
    } else {
      Object.defineProperty(copyObj, key, descriptor[key])
    }
  })
  // \u65B9\u6CD52
  // \u95EE\u9898\uFF1Agetter/setter,\u4E0D\u80FD\u88AB\u904D\u5386\u7684\uFF0Csymbol,\u539F\u578B\u4E0A\u9762\u7684\u5C5E\u6027
  // Object.keys(o).forEach(key => {
  //   if (isObject(o[key])) {
  //     copyObj[key] = deepCopy(o[key], hash)
  //   } else {
  //     copyObj[key] = o[key]
  //   }
  // })
  hash.set(o, copyObj)
  return copyObj
}
`,lang:"javascript"})]),_:1})}}};export{N as default};
