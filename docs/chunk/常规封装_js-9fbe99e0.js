import{r as u,o as A,c as r,f as s,g as F}from"./vendor-e1827163.js";const c={__name:"\u5E38\u89C4\u5C01\u88C5_js",setup(n){const e=[];return(D,B)=>{const o=u("doc-code"),t=u("doc-page");return A(),r(t,{desc:"axios \u7684\u5E38\u89C4\u5C01\u88C5, \u5904\u7406\u767B\u5F55\uFF0C\u65AD\u7F51\u60C5\u51B5",toc:e},{default:s(()=>[F(o,{code:"import%20axios%20from%20%27axios%27%0Aimport%20router%20from%20%27@/router%27%0Aimport%20store%20from%20%27@/store/index%27%0Aimport%20%7B%20Toast%20%7D%20from%20%27vant%27%0A%0Aconst%20tip%20%3D%20msg%20%3D%3E%20%7B%0A%20%20Toast%28%7B%0A%20%20%20%20message%3A%20msg%2C%0A%20%20%20%20duration%3A%201000%2C%0A%20%20%20%20forbidClick%3A%20true%2C%0A%20%20%7D%29%0A%7D%0A%0Aconst%20toLogin%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20router.replace%28%7B%0A%20%20%20%20path%3A%20%27/login%27%2C%0A%20%20%20%20query%3A%20%7B%0A%20%20%20%20%20%20redirect%3A%20router.currentRoute.fullPath%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%29%0A%7D%0A%0A//%20%u521B%u5EFAaxios%u5B9E%u4F8B%0Aconst%20instance%20%3D%20axios.create%28%7B%20timeout%3A%201000%20*%2012%20%7D%29%0A%0A//%20%u670D%u52A1%u7AEF%u901A%u5E38%u662F%u6839%u636E%u8BF7%u6C42%u5934%uFF08headers%uFF09%u4E2D%u7684%20Content-Type%20%u5B57%u6BB5%u6765%u83B7%u77E5%u8BF7%u6C42%u4E2D%u7684%u6D88%u606F%u4E3B%u4F53%u662F%u7528%u4F55%u79CD%u65B9%u5F0F%u7F16%u7801%uFF0C%u518D%u5BF9%u4E3B%u4F53%u8FDB%u884C%u89E3%u6790%u3002%0Ainstance.defaults.headers.post%5B%27Content-Type%27%5D%20%3D%20%27application/json%3Bcharset%3DUTF-8%27%0A%0A//%20%u8BF7%u6C42%u62E6%u622A%0Ainstance.interceptors.request.use%28%0A%20%20config%20%3D%3E%20%7B%0A%20%20%20%20//%20%u6BCF%u6B21%u53D1%u9001%u8BF7%u6C42%u4E4B%u524D%u5224%u65ADvuex%u4E2D%u662F%u5426%u5B58%u5728token%0A%20%20%20%20//%20%u5982%u679C%u5B58%u5728%uFF0C%u5219%u7EDF%u4E00%u5728http%u8BF7%u6C42%u7684header%u90FD%u52A0%u4E0Atoken%uFF0C%u8FD9%u6837%u540E%u53F0%u6839%u636Etoken%u5224%u65AD%u4F60%u7684%u767B%u5F55%u60C5%u51B5%0A%20%20%20%20//%20%u5373%u4F7F%u672C%u5730%u5B58%u5728token%uFF0C%u4E5F%u6709%u53EF%u80FDtoken%u662F%u8FC7%u671F%u7684%uFF0C%u6240%u4EE5%u5728%u54CD%u5E94%u62E6%u622A%u5668%u4E2D%u8981%u5BF9%u8FD4%u56DE%u72B6%u6001%u8FDB%u884C%u5224%u65AD%0A%20%20%20%20//%20%u7F3A%u70B9%u662F%u6BCF%u4E2A%u8BF7%u6C42%u90FD%u4F1A%u5E26token%u53BB%u9A8C%u8BC1%0A%20%20%20%20const%20token%20%3D%20store.state.token%0A%20%20%20%20token%20%26%26%20%28config.headers.Authorization%20%3D%20token%29%0A%20%20%20%20return%20config%0A%20%20%7D%2C%0A%20%20error%20%3D%3E%20Promise.error%28error%29%2C%0A%29%0A%0A//%20%u54CD%u5E94%u62E6%u622A%0Ainstance.interceptors.response.use%28%0A%20%20response%20%3D%3E%20response.status%20%3D%3D%3D%20200%20%3F%20Promise.resolve%28response%29%20%3A%20Promise.reject%28response%29%2C%0A%20%20error%20%3D%3E%20%7B%0A%20%20%20%20const%20%7B%20response%20%7D%20%3D%20error%0A%20%20%20%20if%20%28response%29%20%7B%0A%20%20%20%20%20%20const%20%7B%20status%20%7D%20%3D%20response%0A%20%20%20%20%20%20switch%20%28status%29%20%7B%0A%20%20%20%20%20%20%20%20case%20401%3A%20//%20%20%u672A%u767B%u5F55%0A%20%20%20%20%20%20%20%20%20%20toLogin%28%29%0A%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20case%20403%3A%20//%20%20%u767B%u5F55%u8FC7%u671F%0A%20%20%20%20%20%20%20%20%20%20tip%28%27%u767B%u5F55%u8FC7%u671F%uFF0C%u8BF7%u91CD%u65B0%u767B%u5F55%27%29%0A%20%20%20%20%20%20%20%20%20%20localStorage.removeItem%28%27token%27%29%20%20%20//%20%u6E05%u9664token%0A%20%20%20%20%20%20%20%20%20%20store.commit%28%27loginSuccess%27%2C%20null%29%0A%20%20%20%20%20%20%20%20%20%20toLogin%28%29%0A%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20case%20404%3A%20//%20%20%u8BF7%u6C42%u4E0D%u5B58%u5728%0A%20%20%20%20%20%20%20%20%20%20tip%28%27%u8BF7%u6C42%u7684%u8D44%u6E90%u4E0D%u5B58%u5728%27%29%0A%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20default%3A%20%20//%20%u5176%u4ED6%u9519%u8BEF%uFF0C%u76F4%u63A5%u629B%u51FA%u9519%u8BEF%u63D0%u793A%0A%20%20%20%20%20%20%20%20%20%20tip%28response.data.message%29%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Promise.reject%28error.response%29%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20if%20%28%21window.navigator.onLine%29%20%7B%0A%20%20%20%20%20%20%20%20//%20%u5904%u7406%u65AD%u7F51%u7684%u60C5%u51B5%0A%20%20%20%20%20%20%20%20//%20eg%3A%u8BF7%u6C42%u8D85%u65F6%u6216%u65AD%u7F51%u65F6%uFF0C%u66F4%u65B0state%u7684network%u72B6%u6001%0A%20%20%20%20%20%20%20%20//%20network%u72B6%u6001%u5728app.vue%u4E2D%u63A7%u5236%u7740%u4E00%u4E2A%u5168%u5C40%u7684%u65AD%u7F51%u63D0%u793A%u7EC4%u4EF6%u7684%u663E%u793A%u9690%u85CF%0A%20%20%20%20%20%20%20%20//%20%u5173%u4E8E%u65AD%u7F51%u7EC4%u4EF6%u4E2D%u7684%u5237%u65B0%u91CD%u65B0%u83B7%u53D6%u6570%u636E%uFF0C%u4F1A%u5728%u65AD%u7F51%u7EC4%u4EF6%u4E2D%u8BF4%u660E%0A%20%20%20%20%20%20%20%20store.commit%28%27changeNetwork%27%2C%20false%29%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20Promise.reject%28error%29%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%29%0Aexport%20default%20instance%0A",lang:"javascript"})]),_:1})}}};export{c as default};
