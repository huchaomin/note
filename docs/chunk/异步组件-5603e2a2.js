import{r as s,o as i,c as r,f as c,g as e,aa as n,v as o}from"./vendor-90615676.js";const p=n("h2",{id:"1-\u6982\u89C8",class:"doc-heading"},"\u6982\u89C8",-1),m=n("ul",null,[n("li",null,[o("\u65B0\u7684 "),n("code",{class:"doc-token"},"defineAsyncComponent"),o(" \u52A9\u624B\u65B9\u6CD5\uFF0C\u7528\u4E8E\u663E\u5F0F\u5730\u5B9A\u4E49\u5F02\u6B65\u7EC4\u4EF6")]),n("li",null,[n("code",{class:"doc-token"},"component"),o(" \u9009\u9879\u88AB\u91CD\u547D\u540D\u4E3A "),n("code",{class:"doc-token"},"loader")]),n("li",null,[o("Loader \u51FD\u6570\u672C\u8EAB\u4E0D\u518D\u63A5\u6536 "),n("code",{class:"doc-token"},"resolve"),o(" \u548C "),n("code",{class:"doc-token"},"reject"),o(" \u53C2\u6570\uFF0C\u4E14\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A Promise")])],-1),u=n("h2",{id:"2-2-x-\u8BED\u6CD5",class:"doc-heading"},"2.x \u8BED\u6CD5",-1),_=n("p",null,"\u4EE5\u524D\uFF0C\u5F02\u6B65\u7EC4\u4EF6\u662F\u901A\u8FC7\u5C06\u7EC4\u4EF6\u5B9A\u4E49\u4E3A\u8FD4\u56DE Promise \u7684\u51FD\u6570\u6765\u521B\u5EFA\u7684\uFF0C\u4F8B\u5982\uFF1A",-1),h=n("p",null,"\u6216\u8005\uFF0C\u5BF9\u4E8E\u5E26\u6709\u9009\u9879\u7684\u66F4\u9AD8\u9636\u7684\u7EC4\u4EF6\u8BED\u6CD5\uFF1A",-1),f=n("h2",{id:"3-3-x-\u8BED\u6CD5",class:"doc-heading"},"3.x \u8BED\u6CD5",-1),y=n("p",null,[o("\u73B0\u5728\uFF0C\u5728 Vue 3 \u4E2D\uFF0C\u7531\u4E8E\u51FD\u6570\u5F0F\u7EC4\u4EF6\u88AB\u5B9A\u4E49\u4E3A\u7EAF\u51FD\u6570\uFF0C\u56E0\u6B64\u5F02\u6B65\u7EC4\u4EF6\u9700\u8981\u901A\u8FC7\u5C06\u5176\u5305\u88F9\u5728\u65B0\u7684 "),n("code",{class:"doc-token"},"defineAsyncComponent"),o(" \u52A9\u624B\u65B9\u6CD5\u4E2D\u6765\u663E\u5F0F\u5730\u5B9A\u4E49\uFF1A")],-1),C=n("h2",{id:"4-3-x-\u9AD8\u9636\u7528\u6CD5",class:"doc-heading"},"3.x \u9AD8\u9636\u7528\u6CD5",-1),g={class:"doc-note doc-note--tip"},v=n("p",{class:"doc-note__title"},"TIP",-1),x=n("em",null,"\u61D2\u52A0\u8F7D",-1),k=n("strong",null,"\u4E0D",-1),A=n("code",{class:"doc-token"},"defineAsyncComponent",-1),M=n("h2",{id:"5-\u4E0E-suspense-\u4E00\u8D77\u4F7F\u7528",class:"doc-heading"},"\u4E0E Suspense \u4E00\u8D77\u4F7F\u7528",-1),j=n("p",null,[o("\u5F02\u6B65\u7EC4\u4EF6\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u662F"),n("em",null,"\u53EF\u6302\u8D77"),o("\u7684\u3002\u8FD9\u610F\u5473\u7740\u5982\u679C\u5B83\u5728\u7236\u94FE\u4E2D\u6709\u4E00\u4E2A "),n("code",{class:"doc-token"},"<Suspense>"),o("\uFF0C\u5B83\u5C06\u88AB\u89C6\u4E3A\u8BE5 "),n("code",{class:"doc-token"},"<Suspense>"),o(" \u7684\u5F02\u6B65\u4F9D\u8D56\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u52A0\u8F7D\u72B6\u6001\u5C06\u7531 "),n("code",{class:"doc-token"},"<Suspense>"),o(" \u63A7\u5236\uFF0C\u7EC4\u4EF6\u81EA\u8EAB\u7684\u52A0\u8F7D\u3001\u9519\u8BEF\u3001\u5EF6\u8FDF\u548C\u8D85\u65F6\u9009\u9879\u90FD\u5C06\u88AB\u5FFD\u7565\u3002")],-1),V=n("p",null,[o("\u901A\u8FC7\u5728\u5176\u9009\u9879\u4E2D\u6307\u5B9A "),n("code",{class:"doc-token"},"suspensible: false"),o("\uFF0C\u5F02\u6B65\u7EC4\u4EF6\u53EF\u4EE5\u9000\u51FA "),n("code",{class:"doc-token"},"Suspense"),o(" \u63A7\u5236\uFF0C\u5E76\u59CB\u7EC8\u63A7\u5236\u81EA\u5DF1\u7684\u52A0\u8F7D\u72B6\u6001\u3002")],-1),N={__name:"\u5F02\u6B65\u7EC4\u4EF6",setup(E){const d=[{id:"doc-title",title:"\u5F02\u6B65\u7EC4\u4EF6"},{id:"1-\u6982\u89C8",title:"1. \u6982\u89C8"},{id:"2-2-x-\u8BED\u6CD5",title:"2. 2.x \u8BED\u6CD5"},{id:"3-3-x-\u8BED\u6CD5",title:"3. 3.x \u8BED\u6CD5"},{id:"4-3-x-\u9AD8\u9636\u7528\u6CD5",title:"4. 3.x \u9AD8\u9636\u7528\u6CD5"},{id:"5-\u4E0E-suspense-\u4E00\u8D77\u4F7F\u7528",title:"5. \u4E0E Suspense \u4E00\u8D77\u4F7F\u7528"}];return(L,S)=>{const t=s("doc-code"),a=s("doc-link"),l=s("doc-page");return i(),r(l,{desc:"",toc:d},{default:c(()=>[p,m,u,_,e(t,{code:`const asyncModal = () => import('./Modal.vue')
`,lang:"js"}),h,e(t,{code:`const asyncModal = {
  component: () => import('./Modal.vue'),
  delay: 200,
  timeout: 3000,
  error: ErrorComponent,
  loading: LoadingComponent
}
`,lang:"js"}),f,y,e(t,{code:`import { defineAsyncComponent } from 'vue'
import ErrorComponent from './components/ErrorComponent.vue'
import LoadingComponent from './components/LoadingComponent.vue'

// \u4E0D\u5E26\u9009\u9879\u7684\u5F02\u6B65\u7EC4\u4EF6
const asyncModal = defineAsyncComponent(() => import('./Modal.vue'))

// \u5E26\u9009\u9879\u7684\u5F02\u6B65\u7EC4\u4EF6
const asyncModalWithOptions = defineAsyncComponent({
  loader: () => import('./Modal.vue'),
  delay: 200,
  timeout: 3000,
  errorComponent: ErrorComponent,
  loadingComponent: LoadingComponent
})
app.component('async-component', asyncModal)
app.component('async-component2', asyncModalWithOptions)

// \u6216\u8005
createApp({
  components: {
    AsyncComponent: defineAsyncComponent(() =>
      import('./Modal.vue')
    )
  }
})
`,lang:"js"}),C,e(t,{code:`import { defineAsyncComponent } from 'vue'

const AsyncComp = defineAsyncComponent({
  // \u5DE5\u5382\u51FD\u6570
  loader: () => import('./Foo.vue'),
  // \u52A0\u8F7D\u5F02\u6B65\u7EC4\u4EF6\u65F6\u8981\u4F7F\u7528\u7684\u7EC4\u4EF6
  loadingComponent: LoadingComponent,
  // \u52A0\u8F7D\u5931\u8D25\u65F6\u8981\u4F7F\u7528\u7684\u7EC4\u4EF6
  errorComponent: ErrorComponent,
  // \u5728\u663E\u793A loadingComponent \u4E4B\u524D\u7684\u5EF6\u8FDF | \u9ED8\u8BA4\u503C\uFF1A200\uFF08\u5355\u4F4D ms\uFF09
  delay: 200,
  // \u5982\u679C\u63D0\u4F9B\u4E86 timeout \uFF0C\u5E76\u4E14\u52A0\u8F7D\u7EC4\u4EF6\u7684\u65F6\u95F4\u8D85\u8FC7\u4E86\u8BBE\u5B9A\u503C\uFF0C\u5C06\u663E\u793A\u9519\u8BEF\u7EC4\u4EF6
  // \u9ED8\u8BA4\u503C\uFF1AInfinity\uFF08\u5373\u6C38\u4E0D\u8D85\u65F6\uFF0C\u5355\u4F4D ms\uFF09
  timeout: 3000,
  // \u5B9A\u4E49\u7EC4\u4EF6\u662F\u5426\u53EF\u6302\u8D77 | \u9ED8\u8BA4\u503C\uFF1Atrue
  suspensible: false,
  /**
   *
   * @param {*} error \u9519\u8BEF\u4FE1\u606F\u5BF9\u8C61
   * @param {*} retry \u4E00\u4E2A\u51FD\u6570\uFF0C\u7528\u4E8E\u6307\u793A\u5F53 promise \u52A0\u8F7D\u5668 reject \u65F6\uFF0C\u52A0\u8F7D\u5668\u662F\u5426\u5E94\u8BE5\u91CD\u8BD5
   * @param {*} fail  \u4E00\u4E2A\u51FD\u6570\uFF0C\u6307\u793A\u52A0\u8F7D\u7A0B\u5E8F\u7ED3\u675F\u9000\u51FA
   * @param {*} attempts \u5141\u8BB8\u7684\u6700\u5927\u91CD\u8BD5\u6B21\u6570
   */
  onError(error, retry, fail, attempts) {
    if (error.message.match(/fetch/) && attempts <= 3) {
      // \u8BF7\u6C42\u53D1\u751F\u9519\u8BEF\u65F6\u91CD\u8BD5\uFF0C\u6700\u591A\u53EF\u5C1D\u8BD5 3 \u6B21
      retry()
    } else {
      // \u6CE8\u610F\uFF0Cretry/fail \u5C31\u50CF promise \u7684 resolve/reject \u4E00\u6837\uFF1A
      // \u5FC5\u987B\u8C03\u7528\u5176\u4E2D\u4E00\u4E2A\u624D\u80FD\u7EE7\u7EED\u9519\u8BEF\u5904\u7406\u3002
      fail()
    }
  }
})
`,lang:"js"}),n("div",g,[v,n("p",null,[o("Vue Router \u652F\u6301\u4E00\u4E2A\u7C7B\u4F3C\u7684\u673A\u5236\u6765\u5F02\u6B65\u52A0\u8F7D\u8DEF\u7531\u7EC4\u4EF6\uFF0C\u4E5F\u5C31\u662F\u4FD7\u79F0\u7684"),x,o("\u3002\u5C3D\u7BA1\u7C7B\u4F3C\uFF0C\u4F46\u662F\u8FD9\u4E2A\u529F\u80FD\u548C Vue \u6240\u652F\u6301\u7684\u5F02\u6B65\u7EC4\u4EF6\u662F\u4E0D\u540C\u7684\u3002\u5F53\u7528 Vue Router \u914D\u7F6E\u8DEF\u7531\u7EC4\u4EF6\u65F6\uFF0C\u4F60"),k,o("\u5E94\u8BE5\u4F7F\u7528 "),A,o("\u3002\u4F60\u53EF\u4EE5\u5728 Vue Router \u6587\u6863\u7684"),e(a,{to:"https://next.router.vuejs.org/guide/advanced/lazy-loading.html"},{default:c(()=>[o("\u61D2\u52A0\u8F7D\u8DEF\u7531")]),_:1}),o("\u7AE0\u8282\u9605\u8BFB\u66F4\u591A\u76F8\u5173\u5185\u5BB9\u3002")])]),M,j,V]),_:1})}}};export{N as default};
