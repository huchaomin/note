import{r as s,o as r,c as A,f as i,g as o,aa as e}from"./vendor-b8e3fcbe.js";const u=e("h2",{id:"1-\u4EC0\u4E48\u662F\u81EA\u5B9A\u4E49hooks",class:"doc-heading"},"\u4EC0\u4E48\u662F\u81EA\u5B9A\u4E49hooks",-1),c=e("p",null,"\u81EA\u5B9A\u4E49hooks\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u5176\u540D\u79F0\u4EE5\u201Cuse\u201D\u5F00\u5934\uFF0C\u51FD\u6570\u5185\u90E8\u53EF\u4EE5\u8C03\u7528\u5176\u4ED6\u7684hooks\u3002",-1),B=e("h2",{id:"2-\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u573A\u666F",class:"doc-heading"},"\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u573A\u666F",-1),l=e("ol",null,[e("li",null,"\u591A\u4E2A\u7EC4\u4EF6\u4E4B\u95F4\u5171\u4EAB\u903B\u8F91"),e("li",null,"\u590D\u6742\u7EC4\u4EF6\u7684\u5206\u5272")],-1),D=e("h2",{id:"3-\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u89C4\u5219",class:"doc-heading"},"\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u89C4\u5219",-1),d=e("ol",null,[e("li",null,"\u53EA\u80FD\u5728\u51FD\u6570\u6700\u5916\u5C42\u8C03\u7528hooks\uFF0C\u4E0D\u8981\u5728\u5FAA\u73AF\u3001\u6761\u4EF6\u5224\u65AD\u6216\u8005\u5B50\u51FD\u6570\u4E2D\u8C03\u7528"),e("li",null,"\u53EA\u80FD\u5728React\u7684\u51FD\u6570\u7EC4\u4EF6\u4E2D\u8C03\u7528hooks\uFF0C\u4E0D\u8981\u5728\u5176\u4ED6\u7684JavaScript\u51FD\u6570\u4E2D\u8C03\u7528")],-1),m=e("h2",{id:"4-\u7B80\u5355\u7684\u4F8B\u5B50",class:"doc-heading"},"\u7B80\u5355\u7684\u4F8B\u5B50",-1),f=e("p",null,"usePointerPosition.js",-1),p=e("p",null,"useDelayedValue.js",-1),h=e("p",null,"useFadeIn.js",-1),g=e("p",null,"\u6539\u8FDB\u7248",-1),C=e("p",null,"useAjaxData.js",-1),E=e("h2",{id:"5-\u8868\u683C\u63A7\u4EF6",class:"doc-heading"},"\u8868\u683C\u63A7\u4EF6",-1),_=e("h2",{id:"6-\u5176\u4ED6",class:"doc-heading"},"\u5176\u4ED6",-1),F=e("h3",{id:"7-\u5B98\u7F51\u4F8B\u5B50\u89E3\u6790",class:"doc-heading"},"\u5B98\u7F51\u4F8B\u5B50\u89E3\u6790",-1),I={__name:"\u81EA\u5B9A\u4E49hooks",setup(v){const n=[{id:"doc-title",title:"\u81EA\u5B9A\u4E49hooks"},{id:"1-\u4EC0\u4E48\u662F\u81EA\u5B9A\u4E49hooks",title:"1. \u4EC0\u4E48\u662F\u81EA\u5B9A\u4E49hooks"},{id:"2-\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u573A\u666F",title:"2. \u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u573A\u666F"},{id:"3-\u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u89C4\u5219",title:"3. \u81EA\u5B9A\u4E49hooks\u7684\u4F7F\u7528\u89C4\u5219"},{id:"4-\u7B80\u5355\u7684\u4F8B\u5B50",title:"4. \u7B80\u5355\u7684\u4F8B\u5B50"},{id:"5-\u8868\u683C\u63A7\u4EF6",title:"5. \u8868\u683C\u63A7\u4EF6"},{id:"6-\u5176\u4ED6",title:"6. \u5176\u4ED6"},{id:"7-\u5B98\u7F51\u4F8B\u5B50\u89E3\u6790",title:"6.1. \u5B98\u7F51\u4F8B\u5B50\u89E3\u6790",sub:!0}];return(k,P)=>{const t=s("doc-code"),a=s("doc-page");return r(),A(a,{desc:"",toc:n},{default:i(()=>[u,c,B,l,D,d,m,f,o(t,{code:"import%20%7B%20useState%2C%20useEffect%20%7D%20from%20%27react%27%3B%0A%0Aexport%20function%20usePointerPosition%28%29%20%7B%0A%20%20const%20%5Bposition%2C%20setPosition%5D%20%3D%20useState%28%7B%20x%3A%200%2C%20y%3A%200%20%7D%29%3B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20function%20handleMove%28e%29%20%7B%0A%20%20%20%20%20%20setPosition%28%7B%20x%3A%20e.clientX%2C%20y%3A%20e.clientY%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.addEventListener%28%27pointermove%27%2C%20handleMove%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20window.removeEventListener%28%27pointermove%27%2C%20handleMove%29%3B%0A%20%20%7D%2C%20%5B%5D%29%3B%0A%20%20return%20position%3B%0A%7D%0A",lang:"jsx"}),p,o(t,{code:"import%20%7B%20useState%2C%20useEffect%20%7D%20from%20%27react%27%3B%0A%0Aexport%20function%20useDelayedValue%28value%2C%20delay%29%20%7B%0A%20%20const%20%5BdelayedValue%2C%20setDelayedValue%5D%20%3D%20useState%28value%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20setTimeout%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20setDelayedValue%28value%29%3B%0A%20%20%20%20%7D%2C%20delay%29%3B%0A%20%20%7D%2C%20%5Bvalue%2C%20delay%5D%29%3B%0A%0A%20%20return%20delayedValue%3B%0A%7D%0A",lang:"jsx"}),h,o(t,{code:"import%20%7B%20useEffect%20%7D%20from%20%27react%27%3B%0A%0Aexport%20function%20useFadeIn%28ref%2C%20duration%29%20%7B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20node%20%3D%20ref.current%3B%0A%0A%20%20%20%20let%20startTime%20%3D%20performance.now%28%29%3B%0A%20%20%20%20let%20frameId%20%3D%20null%3B%0A%0A%20%20%20%20function%20onFrame%28now%29%20%7B%0A%20%20%20%20%20%20const%20timePassed%20%3D%20now%20-%20startTime%3B%0A%20%20%20%20%20%20const%20progress%20%3D%20Math.min%28timePassed%20/%20duration%2C%201%29%3B%0A%20%20%20%20%20%20onProgress%28progress%29%3B%0A%20%20%20%20%20%20if%20%28progress%20%3C%201%29%20%7B%0A%20%20%20%20%20%20%20%20//%20We%20still%20have%20more%20frames%20to%20paint%0A%20%20%20%20%20%20%20%20frameId%20%3D%20requestAnimationFrame%28onFrame%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20onProgress%28progress%29%20%7B%0A%20%20%20%20%20%20node.style.opacity%20%3D%20progress%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20start%28%29%20%7B%0A%20%20%20%20%20%20onProgress%280%29%3B%0A%20%20%20%20%20%20startTime%20%3D%20performance.now%28%29%3B%0A%20%20%20%20%20%20frameId%20%3D%20requestAnimationFrame%28onFrame%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20stop%28%29%20%7B%0A%20%20%20%20%20%20cancelAnimationFrame%28frameId%29%3B%0A%20%20%20%20%20%20startTime%20%3D%20null%3B%0A%20%20%20%20%20%20frameId%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20start%28%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20stop%28%29%3B%0A%20%20%7D%2C%20%5Bref%2C%20duration%5D%29%3B%0A%7D%0A",lang:"jsx"}),g,o(t,{code:"import%20%7B%20useState%2C%20useEffect%20%7D%20from%20%27react%27%3B%0Aimport%20%7B%20experimental_useEffectEvent%20as%20useEffectEvent%20%7D%20from%20%27react%27%3B%0A%0Aexport%20function%20useFadeIn%28ref%2C%20duration%29%20%7B%0A%20%20const%20%5BisRunning%2C%20setIsRunning%5D%20%3D%20useState%28true%29%3B%0A%0A%20%20useAnimationLoop%28isRunning%2C%20%28timePassed%29%20%3D%3E%20%7B%0A%20%20%20%20const%20progress%20%3D%20Math.min%28timePassed%20/%20duration%2C%201%29%3B%0A%20%20%20%20ref.current.style.opacity%20%3D%20progress%3B%0A%20%20%20%20if%20%28progress%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20setIsRunning%28false%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%7D%0A%0Afunction%20useAnimationLoop%28isRunning%2C%20drawFrame%29%20%7B%0A%20%20const%20onFrame%20%3D%20useEffectEvent%28drawFrame%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20if%20%28%21isRunning%29%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20startTime%20%3D%20performance.now%28%29%3B%0A%20%20%20%20let%20frameId%20%3D%20null%3B%0A%0A%20%20%20%20function%20tick%28now%29%20%7B%0A%20%20%20%20%20%20const%20timePassed%20%3D%20now%20-%20startTime%3B%0A%20%20%20%20%20%20onFrame%28timePassed%29%3B%0A%20%20%20%20%20%20frameId%20%3D%20requestAnimationFrame%28tick%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20tick%28%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20cancelAnimationFrame%28frameId%29%3B%0A%20%20%7D%2C%20%5BisRunning%5D%29%3B%0A%7D%0A",lang:"jsx"}),C,o(t,{code:"function%20SearchResults%28%7B%20query%20%7D%29%20%7B%0A%20%20const%20%5Bpage%2C%20setPage%5D%20%3D%20useState%281%29%3B%0A%20%20const%20params%20%3D%20new%20URLSearchParams%28%7B%20query%2C%20page%20%7D%29%3B%0A%20%20const%20results%20%3D%20useData%28%60/api/search%3F%24%7Bparams%7D%60%29%3B%0A%0A%20%20function%20handleNextPageClick%28%29%20%7B%0A%20%20%20%20setPage%28page%20+%201%29%3B%0A%20%20%7D%0A%20%20//%20...%0A%7D%0A%0Afunction%20useData%28url%29%20%7B%0A%20%20const%20%5Bdata%2C%20setData%5D%20%3D%20useState%28null%29%3B%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20let%20ignore%20%3D%20false%3B%0A%20%20%20%20fetch%28url%29%0A%20%20%20%20%20%20.then%28response%20%3D%3E%20response.json%28%29%29%0A%20%20%20%20%20%20.then%28json%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21ignore%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20setData%28json%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20ignore%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%2C%20%5Burl%5D%29%3B%0A%20%20return%20data%3B%0A%7D%0A",lang:"jsx"}),E,o(t,{code:"import%20%7B%20useState%20%7D%20from%20%27react%27%3B%0A%0Aexport%20function%20useFormInput%28initialValue%29%20%7B%0A%20%20const%20%5Bvalue%2C%20setValue%5D%20%3D%20useState%28initialValue%29%3B%0A%0A%20%20function%20handleChange%28e%29%20%7B%0A%20%20%20%20setValue%28e.target.value%29%3B%0A%20%20%7D%0A%0A%20%20const%20inputProps%20%3D%20%7B%0A%20%20%20%20value%3A%20value%2C%0A%20%20%20%20onChange%3A%20handleChange%0A%20%20%7D%3B%0A%0A%20%20return%20inputProps%3B%0A%7D%0A//%20%u4F7F%u7528%0A%0Aconst%20firstNameProps%20%3D%20useFormInput%28%27Mary%27%29%3B%0A%3Cinput%20%7B...firstNameProps%7D%20/%3E%0A",lang:"jsx"}),_,F,o(t,{code:"export%20function%20useChatRoom%28%7B%20serverUrl%2C%20roomId%2C%20onReceiveMessage%20%7D%29%20%7B%0A%20%20//%20%u56E0%u4E3A%20onReceiveMessage%20%u662F%u4E00%u4E2A%u65B9%u6CD5%uFF0C%u6BCF%u6B21%u4F7F%u7528%u8FD9%u4E2Ahook%u7684%u7EC4%u4EF6%u91CD%u65B0%u6E32%u67D3%u90FD%u4F1A%u4F20%u4E00%u4E2A%u65B0%u7684%u8FC7%u6765%0A%20%20const%20onMessage%20%3D%20useEffectEvent%28onReceiveMessage%29%3B%0A%0A%20%20useEffect%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20const%20options%20%3D%20%7B%0A%20%20%20%20%20%20serverUrl%3A%20serverUrl%2C%0A%20%20%20%20%20%20roomId%3A%20roomId%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20connection%20%3D%20createConnection%28options%29%3B%0A%20%20%20%20connection.connect%28%29%3B%0A%20%20%20%20connection.on%28%27message%27%2C%20%28msg%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20onMessage%28msg%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20%28%29%20%3D%3E%20connection.disconnect%28%29%3B%0A%20%20%7D%2C%20%5BroomId%2C%20serverUrl%5D%29%3B%20//%20%u2705%20All%20dependencies%20declared%0A%7D%0A",lang:"jsx"})]),_:1})}}};export{I as default};
