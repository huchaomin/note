<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用vite构建自己的前端应用 | vite</title>
    <meta name="description" content="木林子的笔记-记住自己的点滴">
    <meta name="generator" content="VitePress v1.4.0">
    <link rel="preload stylesheet" href="/assets/style.DMizJe2k.css" as="style">
    
    <script type="module" src="/assets/app.BHOG5Zxq.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.DX5qUaEt.js">
    <link rel="modulepreload" href="/assets/chunks/framework.xgaWqU_i.js">
    <link rel="modulepreload" href="/assets/tools_vite.md.DIafb7Sg.lean.js">
    <link href="/favicon.ico" rel="icon">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link as="font" crossorigin="" href="/assets/SmileySans-Oblique.ttf.K8hpreXB.woff2" rel="preload" type="font/woff2">
    <link as="font" crossorigin="" href="/assets/JetBrainsMono-Medium.3S3k2nMz.woff2" media="screen and (max-width: 480px)" rel="preload" type="font/woff2">
    <link as="font" crossorigin="" href="/assets/JetBrainsMono-MediumItalic.BKKs7F3t.woff2" media="screen and (max-width: 480px)" rel="preload" type="font/woff2">
    <link as="font" crossorigin="" href="/assets/JetBrainsMono-SemiBold.BM8Dc2t-.woff2" media="screen and (min-width: 481px)" rel="preload" type="font/woff2">
    <link as="font" crossorigin="" href="/assets/JetBrainsMono-SemiBoldItalic.CekZ8Kac.woff2" media="screen and (min-width: 481px)" rel="preload" type="font/woff2">
  </head>
  <body>
    <div id="app"><div class="__layout-f91x0l n-layout n-layout--absolute-positioned root-layout" style=""><div class="n-layout-scroll-container" style=""><div class="n-layout-header __layout-header-f91x0l-b n-layout-header--static-positioned n-layout-header--bordered nav" style="--side-padding:32px;grid-template-columns:calc(272px - var(--side-padding)) 1fr auto;" data-v-7cc283f3><div class="n-text __text-f91x0l-d1 ui-logo" style="" data-v-7cc283f3><span data-v-7cc283f3>mu</span></div></div><div class="__layout-f91x0l n-layout n-layout--absolute-positioned" style="top:var(--header-height);" id="doc-layout"><div class="n-layout-scroll-container" style="display:flex;flex-wrap:nowrap;width:100%;flex-direction:row;"><aside class="n-layout-sider __layout-sider-f91x0l-b n-layout-sider--static-positioned n-layout-sider--left-placement n-layout-sider--bordered n-layout-sider--show-content" style="max-width:272px;width:272px;"><div style="min-width:272px;" role="none" class="n-scrollbar __scrollbar-f91x0l"><div role="none" class="n-scrollbar-container" style=""><div role="none" style="" class="n-scrollbar-content"><div class="n-tree n-tree--block-node n-tree--block-line __tree-f91x0l" tabindex="0" style=""><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><div class="n-tree-node-indent n-tree-node-indent--show-line n-tree-node-indent--is-leaf"><div style="width:24px;"></div></div><span class="n-tree-node-content"><div class="n-tree-node-content__text">Runtime API Examples</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><span data-switcher="true" class="n-tree-node-switcher" style="width:24px;"><div class="n-tree-node-switcher__icon"><i class="n-base-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12 8l10 8l-10 8z"></path></svg></i></div></span><span class="n-tree-node-content"><div class="n-tree-node-content__text">css</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><div class="n-tree-node-indent n-tree-node-indent--show-line n-tree-node-indent--is-leaf"><div style="width:24px;"></div></div><span class="n-tree-node-content"><div class="n-tree-node-content__text">Markdown Extension Examples</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><span data-switcher="true" class="n-tree-node-switcher n-tree-node-switcher--expanded" style="width:24px;"><div class="n-tree-node-switcher__icon"><i class="n-base-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12 8l10 8l-10 8z"></path></svg></i></div></span><span class="n-tree-node-content"><div class="n-tree-node-content__text">tools</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><div class="n-tree-node-indent n-tree-node-indent--show-line"><div style="width:24px;"></div></div><div class="n-tree-node-indent n-tree-node-indent--show-line n-tree-node-indent--is-leaf"><div style="width:24px;"></div></div><span class="n-tree-node-content"><div class="n-tree-node-content__text">tailwindcss</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selected n-tree-node--pending n-tree-node--selectable n-tree-node--clickable" draggable="false"><div class="n-tree-node-indent n-tree-node-indent--show-line"><div style="width:24px;"></div></div><div class="n-tree-node-indent n-tree-node-indent--show-line n-tree-node-indent--is-leaf"><div style="width:24px;"></div></div><span class="n-tree-node-content"><div class="n-tree-node-content__text">使用vite构建自己的前端应用</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><div class="n-tree-node-indent n-tree-node-indent--show-line"><div style="width:24px;"></div></div><div class="n-tree-node-indent n-tree-node-indent--show-line n-tree-node-indent--is-leaf n-tree-node-indent--last-child"><div style="width:24px;"></div></div><span class="n-tree-node-content"><div class="n-tree-node-content__text">VitePress 介绍</div></span></div></div><div class="n-tree-node-wrapper"><div class="n-tree-node n-tree-node--selectable n-tree-node--clickable" draggable="false"><span data-switcher="true" class="n-tree-node-switcher" style="width:24px;"><div class="n-tree-node-switcher__icon"><i class="n-base-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12 8l10 8l-10 8z"></path></svg></i></div></span><span class="n-tree-node-content"><div class="n-tree-node-content__text">utils</div></span></div></div></div></div></div><div class="n-scrollbar-rail n-scrollbar-rail--vertical n-scrollbar-rail--vertical--right" data-scrollbar-rail="true" style="" aria-hidden="true"></div></div><div class="n-layout-toggle-button" style="top:240px;"><i class="n-base-icon"><svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z" fill="currentColor"></path></svg></i></div><div class="n-layout-sider__border"></div></aside><div class="__layout-f91x0l n-layout n-layout--static-positioned" style=""><div role="none" class="n-scrollbar __scrollbar-f91x0l" style=""><div role="none" class="n-scrollbar-container document-scroll-container" style=""><div role="none" style="min-height:calc(100vh - var(--header-height));display:flex;flex-direction:column;" class="n-scrollbar-content"><div style="position:relative;"><div><h1 id="使用vite构建自己的前端应用" tabindex="-1">使用vite构建自己的前端应用 <a class="header-anchor" href="#使用vite构建自己的前端应用" aria-label="Permalink to &quot;使用vite构建自己的前端应用&quot;">​</a></h1><h2 id="功能" tabindex="-1">功能 <a class="header-anchor" href="#功能" aria-label="Permalink to &quot;功能&quot;">​</a></h2><h3 id="json" tabindex="-1">JSON <a class="header-anchor" href="#json" aria-label="Permalink to &quot;JSON&quot;">​</a></h3><p>JSON 可以被直接导入 —— 同样支持具名导入</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 导入整个对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./example.json&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { field } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./example2.json&#39;</span></span></code></pre></div><h3 id="动态导入" tabindex="-1">动态导入 <a class="header-anchor" href="#动态导入" aria-label="Permalink to &quot;动态导入&quot;">​</a></h3><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 变量仅代表一层深的文件名。如果 file 是 foo/bar，导入将会失败</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`./dir/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}.js`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="环境变量和模式" tabindex="-1">环境变量和模式 <a class="header-anchor" href="#环境变量和模式" aria-label="Permalink to &quot;环境变量和模式&quot;">​</a></h2><h3 id="production" tabindex="-1">&#39;production&#39; <a class="header-anchor" href="#production" aria-label="Permalink to &quot;&#39;production&#39;&quot;">​</a></h3><p>应用运行的模式，可以通过 <code>--mode &lt;xxx&gt;</code> 指定，然后加载对应的 <code>.env.xxx</code> 文件 默认情况下, <code>dev</code> 命令 运行在 <code>development</code> 模式，而 <code>build</code> 命令则运行在 <code>production</code> 模式</p><h3 id="node-env" tabindex="-1">NODE_ENV <a class="header-anchor" href="#node-env" aria-label="Permalink to &quot;NODE_ENV&quot;">​</a></h3><p>与 <code>MODE</code> 的没有丝毫关系，是两个不同的概念 会影响 <code>PROD</code> 和 <code>DEV</code> 的行为</p><table tabindex="0"><thead><tr><th>Command</th><th>true</th><th>false</th></tr></thead><tbody><tr><td>NODE_ENV=production</td><td>true</td><td>false</td></tr><tr><td>NODE_ENV=development</td><td>false</td><td>true</td></tr><tr><td>NODE_ENV=other</td><td>false</td><td>false</td></tr></tbody></table><p>可以在命令行中设置，也可以在env文件中设置</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>命令中使用 <code>NODE_ENV=...</code> 的主要好处是，它允许 Vite 提前检测到该值, 该值的重要性最高，不需要等待读取 <code>env</code> 文件之后才拿到该值</p></div><h2 id="ssr" tabindex="-1">ssr <a class="header-anchor" href="#ssr" aria-label="Permalink to &quot;ssr&quot;">​</a></h2><h3 id="import-meta-url" tabindex="-1">import.meta.url <a class="header-anchor" href="#import-meta-url" aria-label="Permalink to &quot;import.meta.url&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">无法在 SSR 中使用</p><p>因为 import.meta.url 在浏览器和 Node.js 中有不同的语义。服务端的产物也无法预先确定客户端主机 URL。</p></div><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://github.com/antfu-collective/vitesse" target="_blank" rel="noreferrer">vitesse</a></li><li>unplugin-vue-router 和 vite-plugin-vue-layouts 可以不用自己写路由</li><li>vite-plugin-webfont-dl 自动处理字体</li></ul></div></div></div></div><div class="n-scrollbar-rail n-scrollbar-rail--vertical n-scrollbar-rail--vertical--right" data-scrollbar-rail="true" style="" aria-hidden="true"></div></div></div></div></div></div></div><css-render-style><style cssr-id="n-layout">
.n-layout {

 color: var(--n-text-color);
 background-color: var(--n-color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);

}

.n-layout .n-layout-scroll-container {

 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 
}

.n-layout.n-layout--absolute-positioned {

 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 
}
</style>
<style cssr-id="n-global">
body {

 margin: 0;
 font-size: 14px;
 font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
 line-height: 1.6;
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;

}

body input {

 font-family: inherit;
 font-size: inherit;
 
}
</style>
<style cssr-id="__layout-f91x0l">
.__layout-f91x0l {
--n-bezier: cubic-bezier(.4, 0, .2, 1);--n-color: #fff;--n-text-color: rgb(51, 54, 57);
}
</style>
<style cssr-id="n-layout-header">
.n-layout-header {

 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 box-sizing: border-box;
 width: 100%;
 background-color: var(--n-color);
 color: var(--n-text-color);

}

.n-layout-header.n-layout-header--absolute-positioned {

 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 
}

.n-layout-header.n-layout-header--bordered {

 border-bottom: solid 1px var(--n-border-color);
 
}
</style>
<style cssr-id="__layout-header-f91x0l-b">
.__layout-header-f91x0l-b {
--n-bezier: cubic-bezier(.4, 0, .2, 1);--n-color: #fff;--n-text-color: rgb(51, 54, 57);--n-border-color: rgb(239, 239, 245);
}
</style>
<style cssr-id="n-text">
.n-text {

 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);

}

.n-text.n-text--strong {

 font-weight: var(--n-font-weight-strong);
 
}

.n-text.n-text--italic {
  font-style: italic;
}

.n-text.n-text--underline {
  text-decoration: underline;
}

.n-text.n-text--code {

 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 
}
</style>
<style cssr-id="__text-f91x0l-d1">
.__text-f91x0l-d1 {
--n-bezier: cubic-bezier(.4, 0, .2, 1);--n-text-color: rgb(31, 34, 37);--n-font-weight-strong: 500;--n-font-famliy-mono: var(--font-family-mono);--n-code-border-radius: 2px;--n-code-text-color: rgb(51, 54, 57);--n-code-color: rgb(244, 244, 248);--n-code-border: 1px solid #0000;
}
</style></css-render-style><vitepress-path>/tools/vite</vitepress-path></div><div id="waiting">
      <style>
        #waiting {
          position: fixed;
          width: 100%;
          height: 100%;
          background: #fff;
          z-index: 999999;
          display: flex;
          justify-content: center;
          align-items: center;
          top: 0;
          left: 0;
          transition: opacity 0.8s;
        }

        #waiting .loader {
          position: relative;
          box-sizing: border-box;
          display: inline-flex;
          width: 200px;
          height: 140px;
          background: #979794;
          border-radius: 8px;
          perspective: 1000px;

          &::before {
            position: absolute;
            inset: 10px;
            content: "";
            background: #f5f5f5  no-repeat;
            background-image:
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0);
            background-position:
              15px 30px,
              15px 60px,
              15px 90px,
              105px 30px,
              105px 60px,
              105px 90px;
            background-size: 60px 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgb(0 0 0 / 25%);
          }

          &::after {
            position: absolute;
            top: 10px;
            right: 10px;
            bottom: 10px;
            width: calc(50% - 10px);
            content: "";
            background: #fff no-repeat;
            background-image:
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0),
              linear-gradient(#ddd 100px, transparent 0);
            background-position: 50% 30px, 50% 60px, 50%  90px;
            background-size: 60px 10px;
            border-radius: 8px;
            transform: rotateY(0deg);
            transform-origin: left center;
            animation: paging 1s linear infinite;
          }
        }

        @keyframes paging {
          to {
            transform: rotateY(-180deg);
          }
        }
      </style>
      <div class="loader"></div>
    </div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"CJQtCZmD\",\"css_@rules_@layer.md\":\"CllJArdm\",\"css_@rules_@media.md\":\"Dr7H4Our\",\"css_css变量.md\":\"B5pCvq0V\",\"css_css级联(cascade).md\":\"DsuicxKk\",\"index.md\":\"BLrZPtiA\",\"markdown-examples.md\":\"DiGoyx_g\",\"tools_tailwindcss.md\":\"Be-YMX9u\",\"tools_vite.md\":\"DIafb7Sg\",\"tools_vitepress.md\":\"Cv94UfWY\",\"utils_确保网页字体加载完成.md\":\"Dq76HeHQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"vite\",\"description\":\"木林子的笔记-记住自己的点滴\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"sidebar\":[{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"},{\"text\":\"css\",\"items\":[{\"text\":\"@rules\",\"items\":[{\"text\":\"@layer\",\"link\":\"/css/@rules/@layer\"},{\"text\":\"@media\",\"link\":\"/css/@rules/@media\"}]},{\"text\":\"css 变量\",\"link\":\"/css/css变量\"},{\"text\":\"css级联(cascade)\",\"link\":\"/css/css级联(cascade)\"}]},{\"text\":\"Markdown Extension Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"tools\",\"items\":[{\"text\":\"tailwindcss\",\"link\":\"/tools/tailwindcss\"},{\"text\":\"使用vite构建自己的前端应用\",\"link\":\"/tools/vite\"},{\"text\":\"VitePress 介绍\",\"link\":\"/tools/vitePress\"}]},{\"text\":\"utils\",\"items\":[{\"text\":\"确保网页字体加载完成\",\"link\":\"/utils/确保网页字体加载完成\"}]}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>